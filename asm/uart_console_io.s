# uart_console_io.c
.include "macros.inc"

.section .text, "ax"

.balign 4

glabel __close_console
/* 0D7AA0 800DD040 38600000 */  li		r3, 0
/* 0D7AA4 800DD044 4E800020 */  blr		

glabel __write_console
/* 0D7AA8 800DD048 7C0802A6 */  mflr	r0
/* 0D7AAC 800DD04C 38600000 */  li		r3, 0
/* 0D7AB0 800DD050 90010004 */  stw		r0, 4(r1)
/* 0D7AB4 800DD054 9421FFD8 */  stwu	r1, -0x28(r1)
/* 0D7AB8 800DD058 93E10024 */  stw		r31, 0x24(r1)
/* 0D7ABC 800DD05C 3BE50000 */  addi	r31, r5, 0
/* 0D7AC0 800DD060 93C10020 */  stw		r30, 0x20(r1)
/* 0D7AC4 800DD064 3BC40000 */  addi	r30, r4, 0
/* 0D7AC8 800DD068 800D95E0 */  lwz		r0, initialized$16-_SDA_BASE_(r13)
/* 0D7ACC 800DD06C 2C000000 */  cmpwi	r0, 0
/* 0D7AD0 800DD070 40820020 */  bne		lbl_800DD090
/* 0D7AD4 800DD074 3C600001 */  lis		r3, 1
/* 0D7AD8 800DD078 3863E100 */  addi	r3, r3, -7936
/* 0D7ADC 800DD07C 4BFD2E81 */  bl		InitializeUART
/* 0D7AE0 800DD080 2C030000 */  cmpwi	r3, 0
/* 0D7AE4 800DD084 4082000C */  bne		lbl_800DD090
/* 0D7AE8 800DD088 38000001 */  li		r0, 1
/* 0D7AEC 800DD08C 900D95E0 */  stw		r0, initialized$16-_SDA_BASE_(r13)
lbl_800DD090:
/* 0D7AF0 800DD090 2C030000 */  cmpwi	r3, 0
/* 0D7AF4 800DD094 4182000C */  beq		lbl_800DD0A0
/* 0D7AF8 800DD098 38600001 */  li		r3, 1
/* 0D7AFC 800DD09C 4800002C */  b		lbl_800DD0C8
lbl_800DD0A0:
/* 0D7B00 800DD0A0 7FC3F378 */  mr		r3, r30
/* 0D7B04 800DD0A4 809F0000 */  lwz		r4, 0(r31)
/* 0D7B08 800DD0A8 4BFD2ECD */  bl		WriteUARTN
/* 0D7B0C 800DD0AC 2C030000 */  cmpwi	r3, 0
/* 0D7B10 800DD0B0 41820014 */  beq		lbl_800DD0C4
/* 0D7B14 800DD0B4 38000000 */  li		r0, 0
/* 0D7B18 800DD0B8 901F0000 */  stw		r0, 0(r31)
/* 0D7B1C 800DD0BC 38600001 */  li		r3, 1
/* 0D7B20 800DD0C0 48000008 */  b		lbl_800DD0C8
lbl_800DD0C4:
/* 0D7B24 800DD0C4 38600000 */  li		r3, 0
lbl_800DD0C8:
/* 0D7B28 800DD0C8 8001002C */  lwz		r0, 0x2c(r1)
/* 0D7B2C 800DD0CC 83E10024 */  lwz		r31, 0x24(r1)
/* 0D7B30 800DD0D0 83C10020 */  lwz		r30, 0x20(r1)
/* 0D7B34 800DD0D4 7C0803A6 */  mtlr	r0
/* 0D7B38 800DD0D8 38210028 */  addi	r1, r1, 0x28
/* 0D7B3C 800DD0DC 4E800020 */  blr		

glabel __read_console
/* 0D7B40 800DD0E0 7C0802A6 */  mflr	r0
/* 0D7B44 800DD0E4 38600000 */  li		r3, 0
/* 0D7B48 800DD0E8 90010004 */  stw		r0, 4(r1)
/* 0D7B4C 800DD0EC 9421FFD0 */  stwu	r1, -0x30(r1)
/* 0D7B50 800DD0F0 93E1002C */  stw		r31, 0x2c(r1)
/* 0D7B54 800DD0F4 93C10028 */  stw		r30, 0x28(r1)
/* 0D7B58 800DD0F8 3BC50000 */  addi	r30, r5, 0
/* 0D7B5C 800DD0FC 93A10024 */  stw		r29, 0x24(r1)
/* 0D7B60 800DD100 3BA40000 */  addi	r29, r4, 0
/* 0D7B64 800DD104 800D95E0 */  lwz		r0, initialized$16-_SDA_BASE_(r13)
/* 0D7B68 800DD108 2C000000 */  cmpwi	r0, 0
/* 0D7B6C 800DD10C 40820020 */  bne		lbl_800DD12C
/* 0D7B70 800DD110 3C600001 */  lis		r3, 1
/* 0D7B74 800DD114 3863E100 */  addi	r3, r3, -7936
/* 0D7B78 800DD118 4BFD2DE5 */  bl		InitializeUART
/* 0D7B7C 800DD11C 2C030000 */  cmpwi	r3, 0
/* 0D7B80 800DD120 4082000C */  bne		lbl_800DD12C
/* 0D7B84 800DD124 38000001 */  li		r0, 1
/* 0D7B88 800DD128 900D95E0 */  stw		r0, initialized$16-_SDA_BASE_(r13)
lbl_800DD12C:
/* 0D7B8C 800DD12C 2C030000 */  cmpwi	r3, 0
/* 0D7B90 800DD130 4182000C */  beq		lbl_800DD13C
/* 0D7B94 800DD134 38600001 */  li		r3, 1
/* 0D7B98 800DD138 4800006C */  b		lbl_800DD1A4
lbl_800DD13C:
/* 0D7B9C 800DD13C 83FE0000 */  lwz		r31, 0(r30)
/* 0D7BA0 800DD140 38000000 */  li		r0, 0
/* 0D7BA4 800DD144 38600000 */  li		r3, 0
/* 0D7BA8 800DD148 901E0000 */  stw		r0, 0(r30)
/* 0D7BAC 800DD14C 4800002C */  b		lbl_800DD178
lbl_800DD150:
/* 0D7BB0 800DD150 387D0000 */  addi	r3, r29, 0
/* 0D7BB4 800DD154 38800001 */  li		r4, 1
/* 0D7BB8 800DD158 4BFD2E15 */  bl		ReadUARTN
/* 0D7BBC 800DD15C 809E0000 */  lwz		r4, 0(r30)
/* 0D7BC0 800DD160 38040001 */  addi	r0, r4, 1
/* 0D7BC4 800DD164 901E0000 */  stw		r0, 0(r30)
/* 0D7BC8 800DD168 881D0000 */  lbz		r0, 0(r29)
/* 0D7BCC 800DD16C 2800000D */  cmplwi	r0, 0xd
/* 0D7BD0 800DD170 4182001C */  beq		lbl_800DD18C
/* 0D7BD4 800DD174 3BBD0001 */  addi	r29, r29, 1
lbl_800DD178:
/* 0D7BD8 800DD178 801E0000 */  lwz		r0, 0(r30)
/* 0D7BDC 800DD17C 7C00F840 */  cmplw	r0, r31
/* 0D7BE0 800DD180 4181000C */  bgt		lbl_800DD18C
/* 0D7BE4 800DD184 2C030000 */  cmpwi	r3, 0
/* 0D7BE8 800DD188 4182FFC8 */  beq		lbl_800DD150
lbl_800DD18C:
/* 0D7BEC 800DD18C 2C030000 */  cmpwi	r3, 0
/* 0D7BF0 800DD190 4082000C */  bne		lbl_800DD19C
/* 0D7BF4 800DD194 38000000 */  li		r0, 0
/* 0D7BF8 800DD198 48000008 */  b		lbl_800DD1A0
lbl_800DD19C:
/* 0D7BFC 800DD19C 38000001 */  li		r0, 1
lbl_800DD1A0:
/* 0D7C00 800DD1A0 5403063E */  clrlwi	r3, r0, 0x18
lbl_800DD1A4:
/* 0D7C04 800DD1A4 80010034 */  lwz		r0, 0x34(r1)
/* 0D7C08 800DD1A8 83E1002C */  lwz		r31, 0x2c(r1)
/* 0D7C0C 800DD1AC 83C10028 */  lwz		r30, 0x28(r1)
/* 0D7C10 800DD1B0 7C0803A6 */  mtlr	r0
/* 0D7C14 800DD1B4 83A10024 */  lwz		r29, 0x24(r1)
/* 0D7C18 800DD1B8 38210030 */  addi	r1, r1, 0x30
/* 0D7C1C 800DD1BC 4E800020 */  blr		


.section .sbss, "wa"

.balign 8

/* 00100820 80145FC0 0004 */
initialized$16:
    .skip 4


