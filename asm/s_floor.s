# s_floor.c
.include "macros.inc"

.section .text, "ax"

.balign 4

glabel floor
/* 0D86F4 800DDC94 9421FFF0 */  stwu    r1, -0x10(r1)
/* 0D86F8 800DDC98 D8210008 */  stfd    f1, 8(r1)
/* 0D86FC 800DDC9C 80010008 */  lwz     r0, 8(r1)
/* 0D8700 800DDCA0 80E1000C */  lwz     r7, 0xc(r1)
/* 0D8704 800DDCA4 5403657E */  rlwinm  r3, r0, 0xc, 0x15, 0x1f
/* 0D8708 800DDCA8 3883FC01 */  addi    r4, r3, -1023
/* 0D870C 800DDCAC 2C040014 */  cmpwi   r4, 0x14
/* 0D8710 800DDCB0 7C060378 */  mr      r6, r0
/* 0D8714 800DDCB4 408000A4 */  bge     lbl_800DDD58
/* 0D8718 800DDCB8 2C040000 */  cmpwi   r4, 0
/* 0D871C 800DDCBC 40800048 */  bge     lbl_800DDD04
/* 0D8720 800DDCC0 C8428740 */  lfd     f2, D_80146720-_SDA2_BASE_(r2)
/* 0D8724 800DDCC4 C8210008 */  lfd     f1, 8(r1)
/* 0D8728 800DDCC8 C8028748 */  lfd     f0, D_80146728-_SDA2_BASE_(r2)
/* 0D872C 800DDCCC FC22082A */  fadd    f1, f2, f1
/* 0D8730 800DDCD0 FC010040 */  fcmpo   cr0, f1, f0
/* 0D8734 800DDCD4 40810118 */  ble     lbl_800DDDEC
/* 0D8738 800DDCD8 2C060000 */  cmpwi   r6, 0
/* 0D873C 800DDCDC 41800010 */  blt     lbl_800DDCEC
/* 0D8740 800DDCE0 38E00000 */  li      r7, 0
/* 0D8744 800DDCE4 38C00000 */  li      r6, 0
/* 0D8748 800DDCE8 48000104 */  b       lbl_800DDDEC
lbl_800DDCEC:
/* 0D874C 800DDCEC 54C0007E */  clrlwi  r0, r6, 1
/* 0D8750 800DDCF0 7C003B79 */  or.     r0, r0, r7
/* 0D8754 800DDCF4 418200F8 */  beq     lbl_800DDDEC
/* 0D8758 800DDCF8 3CC0BFF0 */  lis     r6, 0xbff0
/* 0D875C 800DDCFC 38E00000 */  li      r7, 0
/* 0D8760 800DDD00 480000EC */  b       lbl_800DDDEC
lbl_800DDD04:
/* 0D8764 800DDD04 3C600010 */  lis     r3, 0x10
/* 0D8768 800DDD08 3803FFFF */  addi    r0, r3, -1
/* 0D876C 800DDD0C 7C052630 */  sraw    r5, r0, r4
/* 0D8770 800DDD10 7CC02838 */  and     r0, r6, r5
/* 0D8774 800DDD14 7CE00379 */  or.     r0, r7, r0
/* 0D8778 800DDD18 4082000C */  bne     lbl_800DDD24
/* 0D877C 800DDD1C C8210008 */  lfd     f1, 8(r1)
/* 0D8780 800DDD20 480000D8 */  b       lbl_800DDDF8
lbl_800DDD24:
/* 0D8784 800DDD24 C8428740 */  lfd     f2, D_80146720-_SDA2_BASE_(r2)
/* 0D8788 800DDD28 C8210008 */  lfd     f1, 8(r1)
/* 0D878C 800DDD2C C8028748 */  lfd     f0, D_80146728-_SDA2_BASE_(r2)
/* 0D8790 800DDD30 FC22082A */  fadd    f1, f2, f1
/* 0D8794 800DDD34 FC010040 */  fcmpo   cr0, f1, f0
/* 0D8798 800DDD38 408100B4 */  ble     lbl_800DDDEC
/* 0D879C 800DDD3C 2C060000 */  cmpwi   r6, 0
/* 0D87A0 800DDD40 4080000C */  bge     lbl_800DDD4C
/* 0D87A4 800DDD44 7C602630 */  sraw    r0, r3, r4
/* 0D87A8 800DDD48 7CC60214 */  add     r6, r6, r0
lbl_800DDD4C:
/* 0D87AC 800DDD4C 7CC62878 */  andc    r6, r6, r5
/* 0D87B0 800DDD50 38E00000 */  li      r7, 0
/* 0D87B4 800DDD54 48000098 */  b       lbl_800DDDEC
lbl_800DDD58:
/* 0D87B8 800DDD58 2C040033 */  cmpwi   r4, 0x33
/* 0D87BC 800DDD5C 40810020 */  ble     lbl_800DDD7C
/* 0D87C0 800DDD60 2C040400 */  cmpwi   r4, 0x400
/* 0D87C4 800DDD64 40820010 */  bne     lbl_800DDD74
/* 0D87C8 800DDD68 C8010008 */  lfd     f0, 8(r1)
/* 0D87CC 800DDD6C FC20002A */  fadd    f1, f0, f0
/* 0D87D0 800DDD70 48000088 */  b       lbl_800DDDF8
lbl_800DDD74:
/* 0D87D4 800DDD74 C8210008 */  lfd     f1, 8(r1)
/* 0D87D8 800DDD78 48000080 */  b       lbl_800DDDF8
lbl_800DDD7C:
/* 0D87DC 800DDD7C 3804FFEC */  addi    r0, r4, -20
/* 0D87E0 800DDD80 3860FFFF */  li      r3, -1
/* 0D87E4 800DDD84 7C650430 */  srw     r5, r3, r0
/* 0D87E8 800DDD88 7CE02839 */  and.    r0, r7, r5
/* 0D87EC 800DDD8C 4082000C */  bne     lbl_800DDD98
/* 0D87F0 800DDD90 C8210008 */  lfd     f1, 8(r1)
/* 0D87F4 800DDD94 48000064 */  b       lbl_800DDDF8
lbl_800DDD98:
/* 0D87F8 800DDD98 C8428740 */  lfd     f2, D_80146720-_SDA2_BASE_(r2)
/* 0D87FC 800DDD9C C8210008 */  lfd     f1, 8(r1)
/* 0D8800 800DDDA0 C8028748 */  lfd     f0, D_80146728-_SDA2_BASE_(r2)
/* 0D8804 800DDDA4 FC22082A */  fadd    f1, f2, f1
/* 0D8808 800DDDA8 FC010040 */  fcmpo   cr0, f1, f0
/* 0D880C 800DDDAC 40810040 */  ble     lbl_800DDDEC
/* 0D8810 800DDDB0 2C060000 */  cmpwi   r6, 0
/* 0D8814 800DDDB4 40800034 */  bge     lbl_800DDDE8
/* 0D8818 800DDDB8 2C040014 */  cmpwi   r4, 0x14
/* 0D881C 800DDDBC 4082000C */  bne     lbl_800DDDC8
/* 0D8820 800DDDC0 38C60001 */  addi    r6, r6, 1
/* 0D8824 800DDDC4 48000024 */  b       lbl_800DDDE8
lbl_800DDDC8:
/* 0D8828 800DDDC8 20040034 */  subfic  r0, r4, 0x34
/* 0D882C 800DDDCC 38600001 */  li      r3, 1
/* 0D8830 800DDDD0 7C600030 */  slw     r0, r3, r0
/* 0D8834 800DDDD4 7C070214 */  add     r0, r7, r0
/* 0D8838 800DDDD8 7C003840 */  cmplw   r0, r7
/* 0D883C 800DDDDC 40800008 */  bge     lbl_800DDDE4
/* 0D8840 800DDDE0 38C60001 */  addi    r6, r6, 1
lbl_800DDDE4:
/* 0D8844 800DDDE4 7C070378 */  mr      r7, r0
lbl_800DDDE8:
/* 0D8848 800DDDE8 7CE72878 */  andc    r7, r7, r5
lbl_800DDDEC:
/* 0D884C 800DDDEC 90C10008 */  stw     r6, 8(r1)
/* 0D8850 800DDDF0 90E1000C */  stw     r7, 0xc(r1)
/* 0D8854 800DDDF4 C8210008 */  lfd     f1, 8(r1)
lbl_800DDDF8:
/* 0D8858 800DDDF8 38210010 */  addi    r1, r1, 0x10
/* 0D885C 800DDDFC 4E800020 */  blr     


.section .sdata2, "wa"

.balign 8

/* 001007E0 80146720 0008 */
D_80146720:
    .double 1e+300

.balign 8

/* 001007E8 80146728 0008 */
D_80146728:
    .double 0.0


