# ansi_fp.c
.include "macros.inc"

.section .text, "ax"

.balign 4

glabel __num2dec
/* 0D4CDC 800DA27C 7C0802A6 */  mflr    r0
/* 0D4CE0 800DA280 90010004 */  stw     r0, 4(r1)
/* 0D4CE4 800DA284 9421FF98 */  stwu    r1, -0x68(r1)
/* 0D4CE8 800DA288 DBE10060 */  stfd    f31, 0x60(r1)
/* 0D4CEC 800DA28C FFE00890 */  fmr     f31, f1
/* 0D4CF0 800DA290 93E1005C */  stw     r31, 0x5c(r1)
/* 0D4CF4 800DA294 93C10058 */  stw     r30, 0x58(r1)
/* 0D4CF8 800DA298 3BC40000 */  addi    r30, r4, 0
/* 0D4CFC 800DA29C 93A10054 */  stw     r29, 0x54(r1)
/* 0D4D00 800DA2A0 7C7D1B78 */  mr      r29, r3
/* 0D4D04 800DA2A4 A8030002 */  lha     r0, 2(r3)
/* 0D4D08 800DA2A8 2C000010 */  cmpwi   r0, 0x10
/* 0D4D0C 800DA2AC 7C1F0378 */  mr      r31, r0
/* 0D4D10 800DA2B0 40810008 */  ble     lbl_800DA2B8
/* 0D4D14 800DA2B4 3BE00010 */  li      r31, 0x10
lbl_800DA2B8:
/* 0D4D18 800DA2B8 38600000 */  li      r3, 0
/* 0D4D1C 800DA2BC 987E0000 */  stb     r3, 0(r30)
/* 0D4D20 800DA2C0 38000001 */  li      r0, 1
/* 0D4D24 800DA2C4 B07E0002 */  sth     r3, 2(r30)
/* 0D4D28 800DA2C8 981E0004 */  stb     r0, 4(r30)
/* 0D4D2C 800DA2CC C80285F0 */  lfd     f0, D_801465D0-_SDA2_BASE_(r2)
/* 0D4D30 800DA2D0 FC00F800 */  fcmpu   cr0, f0, f31
/* 0D4D34 800DA2D4 40820010 */  bne     lbl_800DA2E4
/* 0D4D38 800DA2D8 38000030 */  li      r0, 0x30
/* 0D4D3C 800DA2DC 981E0005 */  stb     r0, 5(r30)
/* 0D4D40 800DA2E0 48000330 */  b       lbl_800DA610
lbl_800DA2E4:
/* 0D4D44 800DA2E4 DBE10028 */  stfd    f31, 0x28(r1)
/* 0D4D48 800DA2E8 3C007FF0 */  lis     r0, 0x7ff0
/* 0D4D4C 800DA2EC 80810028 */  lwz     r4, 0x28(r1)
/* 0D4D50 800DA2F0 54830056 */  rlwinm  r3, r4, 0, 1, 0xb
/* 0D4D54 800DA2F4 7C030000 */  cmpw    r3, r0
/* 0D4D58 800DA2F8 41820014 */  beq     lbl_800DA30C
/* 0D4D5C 800DA2FC 40800058 */  bge     lbl_800DA354
/* 0D4D60 800DA300 2C030000 */  cmpwi   r3, 0
/* 0D4D64 800DA304 4182002C */  beq     lbl_800DA330
/* 0D4D68 800DA308 4800004C */  b       lbl_800DA354
lbl_800DA30C:
/* 0D4D6C 800DA30C 5480033F */  clrlwi. r0, r4, 0xc
/* 0D4D70 800DA310 40820010 */  bne     lbl_800DA320
/* 0D4D74 800DA314 8001002C */  lwz     r0, 0x2c(r1)
/* 0D4D78 800DA318 2C000000 */  cmpwi   r0, 0
/* 0D4D7C 800DA31C 4182000C */  beq     lbl_800DA328
lbl_800DA320:
/* 0D4D80 800DA320 38000001 */  li      r0, 1
/* 0D4D84 800DA324 48000034 */  b       lbl_800DA358
lbl_800DA328:
/* 0D4D88 800DA328 38000002 */  li      r0, 2
/* 0D4D8C 800DA32C 4800002C */  b       lbl_800DA358
lbl_800DA330:
/* 0D4D90 800DA330 5480033F */  clrlwi. r0, r4, 0xc
/* 0D4D94 800DA334 40820010 */  bne     lbl_800DA344
/* 0D4D98 800DA338 8001002C */  lwz     r0, 0x2c(r1)
/* 0D4D9C 800DA33C 2C000000 */  cmpwi   r0, 0
/* 0D4DA0 800DA340 4182000C */  beq     lbl_800DA34C
lbl_800DA344:
/* 0D4DA4 800DA344 38000005 */  li      r0, 5
/* 0D4DA8 800DA348 48000010 */  b       lbl_800DA358
lbl_800DA34C:
/* 0D4DAC 800DA34C 38000003 */  li      r0, 3
/* 0D4DB0 800DA350 48000008 */  b       lbl_800DA358
lbl_800DA354:
/* 0D4DB4 800DA354 38000004 */  li      r0, 4
lbl_800DA358:
/* 0D4DB8 800DA358 2C000002 */  cmpwi   r0, 2
/* 0D4DBC 800DA35C 41810094 */  bgt     lbl_800DA3F0
/* 0D4DC0 800DA360 DBE10020 */  stfd    f31, 0x20(r1)
/* 0D4DC4 800DA364 3C007FF0 */  lis     r0, 0x7ff0
/* 0D4DC8 800DA368 80810020 */  lwz     r4, 0x20(r1)
/* 0D4DCC 800DA36C 54830056 */  rlwinm  r3, r4, 0, 1, 0xb
/* 0D4DD0 800DA370 7C030000 */  cmpw    r3, r0
/* 0D4DD4 800DA374 41820014 */  beq     lbl_800DA388
/* 0D4DD8 800DA378 40800058 */  bge     lbl_800DA3D0
/* 0D4DDC 800DA37C 2C030000 */  cmpwi   r3, 0
/* 0D4DE0 800DA380 4182002C */  beq     lbl_800DA3AC
/* 0D4DE4 800DA384 4800004C */  b       lbl_800DA3D0
lbl_800DA388:
/* 0D4DE8 800DA388 5480033F */  clrlwi. r0, r4, 0xc
/* 0D4DEC 800DA38C 40820010 */  bne     lbl_800DA39C
/* 0D4DF0 800DA390 80010024 */  lwz     r0, 0x24(r1)
/* 0D4DF4 800DA394 2C000000 */  cmpwi   r0, 0
/* 0D4DF8 800DA398 4182000C */  beq     lbl_800DA3A4
lbl_800DA39C:
/* 0D4DFC 800DA39C 38000001 */  li      r0, 1
/* 0D4E00 800DA3A0 48000034 */  b       lbl_800DA3D4
lbl_800DA3A4:
/* 0D4E04 800DA3A4 38000002 */  li      r0, 2
/* 0D4E08 800DA3A8 4800002C */  b       lbl_800DA3D4
lbl_800DA3AC:
/* 0D4E0C 800DA3AC 5480033F */  clrlwi. r0, r4, 0xc
/* 0D4E10 800DA3B0 40820010 */  bne     lbl_800DA3C0
/* 0D4E14 800DA3B4 80010024 */  lwz     r0, 0x24(r1)
/* 0D4E18 800DA3B8 2C000000 */  cmpwi   r0, 0
/* 0D4E1C 800DA3BC 4182000C */  beq     lbl_800DA3C8
lbl_800DA3C0:
/* 0D4E20 800DA3C0 38000005 */  li      r0, 5
/* 0D4E24 800DA3C4 48000010 */  b       lbl_800DA3D4
lbl_800DA3C8:
/* 0D4E28 800DA3C8 38000003 */  li      r0, 3
/* 0D4E2C 800DA3CC 48000008 */  b       lbl_800DA3D4
lbl_800DA3D0:
/* 0D4E30 800DA3D0 38000004 */  li      r0, 4
lbl_800DA3D4:
/* 0D4E34 800DA3D4 2C000001 */  cmpwi   r0, 1
/* 0D4E38 800DA3D8 4082000C */  bne     lbl_800DA3E4
/* 0D4E3C 800DA3DC 3800004E */  li      r0, 0x4e
/* 0D4E40 800DA3E0 48000008 */  b       lbl_800DA3E8
lbl_800DA3E4:
/* 0D4E44 800DA3E4 38000049 */  li      r0, 0x49
lbl_800DA3E8:
/* 0D4E48 800DA3E8 981E0005 */  stb     r0, 5(r30)
/* 0D4E4C 800DA3EC 48000224 */  b       lbl_800DA610
lbl_800DA3F0:
/* 0D4E50 800DA3F0 38000000 */  li      r0, 0
/* 0D4E54 800DA3F4 981E0004 */  stb     r0, 4(r30)
/* 0D4E58 800DA3F8 C80285F0 */  lfd     f0, D_801465D0-_SDA2_BASE_(r2)
/* 0D4E5C 800DA3FC FC1F0040 */  fcmpo   cr0, f31, f0
/* 0D4E60 800DA400 40800010 */  bge     lbl_800DA410
/* 0D4E64 800DA404 38000001 */  li      r0, 1
/* 0D4E68 800DA408 FFE0F850 */  fneg    f31, f31
/* 0D4E6C 800DA40C 981E0000 */  stb     r0, 0(r30)
lbl_800DA410:
/* 0D4E70 800DA410 FC20F890 */  fmr     f1, f31
/* 0D4E74 800DA414 38610030 */  addi    r3, r1, 0x30
/* 0D4E78 800DA418 480039E9 */  bl      frexp
/* 0D4E7C 800DA41C 3C600005 */  lis     r3, 5
/* 0D4E80 800DA420 80810030 */  lwz     r4, 0x30(r1)
/* 0D4E84 800DA424 380397E5 */  addi    r0, r3, -26651
/* 0D4E88 800DA428 7C0401D6 */  mullw   r0, r4, r0
/* 0D4E8C 800DA42C 3C60431C */  lis     r3, 0x431c
/* 0D4E90 800DA430 3863DE83 */  addi    r3, r3, -8573
/* 0D4E94 800DA434 7C030096 */  mulhw   r0, r3, r0
/* 0D4E98 800DA438 7C009670 */  srawi   r0, r0, 0x12
/* 0D4E9C 800DA43C 54030FFE */  srwi    r3, r0, 0x1f
/* 0D4EA0 800DA440 7C801A15 */  add.    r4, r0, r3
/* 0D4EA4 800DA444 3C60800E */  lis     r3, bit_values@ha
/* 0D4EA8 800DA448 3803F498 */  addi    r0, r3, bit_values@l
/* 0D4EAC 800DA44C 38640000 */  addi    r3, r4, 0
/* 0D4EB0 800DA450 7C050378 */  mr      r5, r0
/* 0D4EB4 800DA454 40800030 */  bge     lbl_800DA484
/* 0D4EB8 800DA458 7C8400D0 */  neg     r4, r4
/* 0D4EBC 800DA45C 4800001C */  b       lbl_800DA478
lbl_800DA460:
/* 0D4EC0 800DA460 548007FF */  clrlwi. r0, r4, 0x1f
/* 0D4EC4 800DA464 4182000C */  beq     lbl_800DA470
/* 0D4EC8 800DA468 C8050000 */  lfd     f0, 0(r5)
/* 0D4ECC 800DA46C FFFF0032 */  fmul    f31, f31, f0
lbl_800DA470:
/* 0D4ED0 800DA470 7C840E70 */  srawi   r4, r4, 1
/* 0D4ED4 800DA474 38A50008 */  addi    r5, r5, 8
lbl_800DA478:
/* 0D4ED8 800DA478 2C040000 */  cmpwi   r4, 0
/* 0D4EDC 800DA47C 4082FFE4 */  bne     lbl_800DA460
/* 0D4EE0 800DA480 48000034 */  b       lbl_800DA4B4
lbl_800DA484:
/* 0D4EE4 800DA484 40810030 */  ble     lbl_800DA4B4
/* 0D4EE8 800DA488 C82285F8 */  lfd     f1, D_801465D8-_SDA2_BASE_(r2)
/* 0D4EEC 800DA48C 4800001C */  b       lbl_800DA4A8
lbl_800DA490:
/* 0D4EF0 800DA490 548007FF */  clrlwi. r0, r4, 0x1f
/* 0D4EF4 800DA494 4182000C */  beq     lbl_800DA4A0
/* 0D4EF8 800DA498 C8050000 */  lfd     f0, 0(r5)
/* 0D4EFC 800DA49C FC210032 */  fmul    f1, f1, f0
lbl_800DA4A0:
/* 0D4F00 800DA4A0 7C840E70 */  srawi   r4, r4, 1
/* 0D4F04 800DA4A4 38A50008 */  addi    r5, r5, 8
lbl_800DA4A8:
/* 0D4F08 800DA4A8 2C040000 */  cmpwi   r4, 0
/* 0D4F0C 800DA4AC 4082FFE4 */  bne     lbl_800DA490
/* 0D4F10 800DA4B0 FFFF0824 */  fdiv    f31, f31, f1
lbl_800DA4B4:
/* 0D4F14 800DA4B4 C8228608 */  lfd     f1, D_801465E8-_SDA2_BASE_(r2)
/* 0D4F18 800DA4B8 C80285F8 */  lfd     f0, D_801465D8-_SDA2_BASE_(r2)
/* 0D4F1C 800DA4BC 4800000C */  b       lbl_800DA4C8
lbl_800DA4C0:
/* 0D4F20 800DA4C0 FFFF0072 */  fmul    f31, f31, f1
/* 0D4F24 800DA4C4 38630001 */  addi    r3, r3, 1
lbl_800DA4C8:
/* 0D4F28 800DA4C8 FC1F0040 */  fcmpo   cr0, f31, f0
/* 0D4F2C 800DA4CC 4C411382 */  cror    2, 1, 2
/* 0D4F30 800DA4D0 4182FFF0 */  beq     lbl_800DA4C0
/* 0D4F34 800DA4D4 C8228610 */  lfd     f1, D_801465F0-_SDA2_BASE_(r2)
/* 0D4F38 800DA4D8 C8028608 */  lfd     f0, D_801465E8-_SDA2_BASE_(r2)
/* 0D4F3C 800DA4DC 4800000C */  b       lbl_800DA4E8
lbl_800DA4E0:
/* 0D4F40 800DA4E0 FFFF0072 */  fmul    f31, f31, f1
/* 0D4F44 800DA4E4 3863FFFF */  addi    r3, r3, -1
lbl_800DA4E8:
/* 0D4F48 800DA4E8 FC1F0040 */  fcmpo   cr0, f31, f0
/* 0D4F4C 800DA4EC 4180FFF4 */  blt     lbl_800DA4E0
/* 0D4F50 800DA4F0 3CA06666 */  lis     r5, 0x6666
/* 0D4F54 800DA4F4 C8228600 */  lfd     f1, D_801465E0-_SDA2_BASE_(r2)
/* 0D4F58 800DA4F8 3CC0800E */  lis     r6, digit_values@ha
/* 0D4F5C 800DA4FC 389E0005 */  addi    r4, r30, 5
/* 0D4F60 800DA500 38E56667 */  addi    r7, r5, 0x6667
/* 0D4F64 800DA504 3946F4E0 */  addi    r10, r6, digit_values@l
/* 0D4F68 800DA508 3D204330 */  lis     r9, 0x4330
/* 0D4F6C 800DA50C 480000AC */  b       lbl_800DA5B8
lbl_800DA510:
/* 0D4F70 800DA510 2C1F0008 */  cmpwi   r31, 8
/* 0D4F74 800DA514 399F0000 */  addi    r12, r31, 0
/* 0D4F78 800DA518 40810008 */  ble     lbl_800DA520
/* 0D4F7C 800DA51C 39800008 */  li      r12, 8
lbl_800DA520:
/* 0D4F80 800DA520 88DE0004 */  lbz     r6, 4(r30)
/* 0D4F84 800DA524 55801838 */  slwi    r0, r12, 3
/* 0D4F88 800DA528 7CAA0214 */  add     r5, r10, r0
/* 0D4F8C 800DA52C 7C066214 */  add     r0, r6, r12
/* 0D4F90 800DA530 981E0004 */  stb     r0, 4(r30)
/* 0D4F94 800DA534 7FECF850 */  subf    r31, r12, r31
/* 0D4F98 800DA538 7C6C1850 */  subf    r3, r12, r3
/* 0D4F9C 800DA53C C805FFF8 */  lfd     f0, -8(r5)
/* 0D4FA0 800DA540 7C846214 */  add     r4, r4, r12
/* 0D4FA4 800DA544 396C0001 */  addi    r11, r12, 1
/* 0D4FA8 800DA548 FFFF0032 */  fmul    f31, f31, f0
/* 0D4FAC 800DA54C FC00F81E */  fctiwz  f0, f31
/* 0D4FB0 800DA550 D8010040 */  stfd    f0, 0x40(r1)
/* 0D4FB4 800DA554 80010044 */  lwz     r0, 0x44(r1)
/* 0D4FB8 800DA558 D8010048 */  stfd    f0, 0x48(r1)
/* 0D4FBC 800DA55C 6C008000 */  xoris   r0, r0, 0x8000
/* 0D4FC0 800DA560 9001003C */  stw     r0, 0x3c(r1)
/* 0D4FC4 800DA564 80C1004C */  lwz     r6, 0x4c(r1)
/* 0D4FC8 800DA568 91210038 */  stw     r9, 0x38(r1)
/* 0D4FCC 800DA56C C8010038 */  lfd     f0, 0x38(r1)
/* 0D4FD0 800DA570 FC000828 */  fsub    f0, f0, f1
/* 0D4FD4 800DA574 FFFF0028 */  fsub    f31, f31, f0
/* 0D4FD8 800DA578 48000034 */  b       lbl_800DA5AC
lbl_800DA57C:
/* 0D4FDC 800DA57C 7D073096 */  mulhw   r8, r7, r6
/* 0D4FE0 800DA580 7D001670 */  srawi   r0, r8, 2
/* 0D4FE4 800DA584 54050FFE */  srwi    r5, r0, 0x1f
/* 0D4FE8 800DA588 7C002A14 */  add     r0, r0, r5
/* 0D4FEC 800DA58C 1C00000A */  mulli   r0, r0, 0xa
/* 0D4FF0 800DA590 7CC03050 */  subf    r6, r0, r6
/* 0D4FF4 800DA594 7D001670 */  srawi   r0, r8, 2
/* 0D4FF8 800DA598 38C60030 */  addi    r6, r6, 0x30
/* 0D4FFC 800DA59C 98C4FFFF */  stb     r6, -1(r4)
/* 0D5000 800DA5A0 54050FFE */  srwi    r5, r0, 0x1f
/* 0D5004 800DA5A4 7CC02A14 */  add     r6, r0, r5
/* 0D5008 800DA5A8 3884FFFF */  addi    r4, r4, -1
lbl_800DA5AC:
/* 0D500C 800DA5AC 356BFFFF */  addic.  r11, r11, -1
/* 0D5010 800DA5B0 4082FFCC */  bne     lbl_800DA57C
/* 0D5014 800DA5B4 7C846214 */  add     r4, r4, r12
lbl_800DA5B8:
/* 0D5018 800DA5B8 2C1F0000 */  cmpwi   r31, 0
/* 0D501C 800DA5BC 4082FF54 */  bne     lbl_800DA510
/* 0D5020 800DA5C0 A8BD0002 */  lha     r5, 2(r29)
/* 0D5024 800DA5C4 2C050024 */  cmpwi   r5, 0x24
/* 0D5028 800DA5C8 40810008 */  ble     lbl_800DA5D0
/* 0D502C 800DA5CC 38A00024 */  li      r5, 0x24
lbl_800DA5D0:
/* 0D5030 800DA5D0 881E0004 */  lbz     r0, 4(r30)
/* 0D5034 800DA5D4 7CA02851 */  subf.   r5, r0, r5
/* 0D5038 800DA5D8 40810030 */  ble     lbl_800DA608
/* 0D503C 800DA5DC 38C50001 */  addi    r6, r5, 1
/* 0D5040 800DA5E0 38000030 */  li      r0, 0x30
/* 0D5044 800DA5E4 4800000C */  b       lbl_800DA5F0
lbl_800DA5E8:
/* 0D5048 800DA5E8 98040000 */  stb     r0, 0(r4)
/* 0D504C 800DA5EC 38840001 */  addi    r4, r4, 1
lbl_800DA5F0:
/* 0D5050 800DA5F0 34C6FFFF */  addic.  r6, r6, -1
/* 0D5054 800DA5F4 4082FFF4 */  bne     lbl_800DA5E8
/* 0D5058 800DA5F8 881E0004 */  lbz     r0, 4(r30)
/* 0D505C 800DA5FC 7C651850 */  subf    r3, r5, r3
/* 0D5060 800DA600 7C002A14 */  add     r0, r0, r5
/* 0D5064 800DA604 981E0004 */  stb     r0, 4(r30)
lbl_800DA608:
/* 0D5068 800DA608 7C600734 */  extsh   r0, r3
/* 0D506C 800DA60C B01E0002 */  sth     r0, 2(r30)
lbl_800DA610:
/* 0D5070 800DA610 8001006C */  lwz     r0, 0x6c(r1)
/* 0D5074 800DA614 CBE10060 */  lfd     f31, 0x60(r1)
/* 0D5078 800DA618 83E1005C */  lwz     r31, 0x5c(r1)
/* 0D507C 800DA61C 7C0803A6 */  mtlr    r0
/* 0D5080 800DA620 83C10058 */  lwz     r30, 0x58(r1)
/* 0D5084 800DA624 83A10054 */  lwz     r29, 0x54(r1)
/* 0D5088 800DA628 38210068 */  addi    r1, r1, 0x68
/* 0D508C 800DA62C 4E800020 */  blr     


.section .rodata, "a"

.balign 8

/* 000DC518 800DF498 0048 */
bit_values:
    .long 0x40240000, 0x00000000, 0x40590000, 0x00000000, 0x40C38800, 0x00000000, 0x4197D784, 0x00000000
    .long 0x4341C379, 0x37E08000, 0x4693B8B5, 0xB5056E17, 0x4D384F03, 0xE93FF9F5, 0x5A827748, 0xF9301D32
    .long 0x75154FDD, 0x7F73BF3C

/* 000DC560 800DF4E0 0040 */
digit_values:
    .long 0x40240000, 0x00000000, 0x40590000, 0x00000000, 0x408F4000, 0x00000000, 0x40C38800, 0x00000000
    .long 0x40F86A00, 0x00000000, 0x412E8480, 0x00000000, 0x416312D0, 0x00000000, 0x4197D784, 0x00000000


.section .sdata2, "wa"

.balign 8

/* 00100690 801465D0 0008 */
D_801465D0:
    .double 0.0

.balign 8

/* 00100698 801465D8 0008 */
D_801465D8:
    .double 1.0

.balign 8

/* 001006A0 801465E0 0008 */
D_801465E0:
    .double 4503601774854144.0

.balign 8

/* 001006A8 801465E8 0008 */
D_801465E8:
    .double 0.1

.balign 8

/* 001006B0 801465F0 0008 */
D_801465F0:
    .double 10.0


