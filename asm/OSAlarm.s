# OSAlarm.c
.include "macros.inc"

.section .text, "ax"

.balign 4

glabel OSInitAlarm
/* 0A2B90 800A8130 7C0802A6 */  mflr    r0
/* 0A2B94 800A8134 38600008 */  li      r3, 8
/* 0A2B98 800A8138 90010004 */  stw     r0, 4(r1)
/* 0A2B9C 800A813C 9421FFF8 */  stwu    r1, -8(r1)
/* 0A2BA0 800A8140 4BFFFE55 */  bl      __OSGetExceptionHandler
/* 0A2BA4 800A8144 3C80800B */  lis     r4, DecrementerExceptionHandler@ha
/* 0A2BA8 800A8148 3884879C */  addi    r4, r4, DecrementerExceptionHandler@l
/* 0A2BAC 800A814C 7C032040 */  cmplw   r3, r4
/* 0A2BB0 800A8150 41820028 */  beq     lbl_800A8178
/* 0A2BB4 800A8154 38000000 */  li      r0, 0
/* 0A2BB8 800A8158 386D90F8 */  addi    r3, r13, AlarmQueue-_SDA_BASE_
/* 0A2BBC 800A815C 90030004 */  stw     r0, 4(r3)
/* 0A2BC0 800A8160 38600008 */  li      r3, 8
/* 0A2BC4 800A8164 900D90F8 */  stw     r0, AlarmQueue-_SDA_BASE_(r13)
/* 0A2BC8 800A8168 4BFFFE11 */  bl      __OSSetExceptionHandler
/* 0A2BCC 800A816C 3C608010 */  lis     r3, ResetFunctionInfo@ha
/* 0A2BD0 800A8170 3863E870 */  addi    r3, r3, ResetFunctionInfo@l
/* 0A2BD4 800A8174 48003729 */  bl      OSRegisterResetFunction
lbl_800A8178:
/* 0A2BD8 800A8178 8001000C */  lwz     r0, 0xc(r1)
/* 0A2BDC 800A817C 38210008 */  addi    r1, r1, 8
/* 0A2BE0 800A8180 7C0803A6 */  mtlr    r0
/* 0A2BE4 800A8184 4E800020 */  blr     

glabel OSCreateAlarm
/* 0A2BE8 800A8188 38000000 */  li      r0, 0
/* 0A2BEC 800A818C 90030000 */  stw     r0, 0(r3)
/* 0A2BF0 800A8190 90030004 */  stw     r0, 4(r3)
/* 0A2BF4 800A8194 4E800020 */  blr     

InsertAlarm:
/* 0A2BF8 800A8198 7C0802A6 */  mflr    r0
/* 0A2BFC 800A819C 90010004 */  stw     r0, 4(r1)
/* 0A2C00 800A81A0 9421FFC0 */  stwu    r1, -0x40(r1)
/* 0A2C04 800A81A4 BF210024 */  stmw    r25, 0x24(r1)
/* 0A2C08 800A81A8 3B800000 */  li      r28, 0
/* 0A2C0C 800A81AC 7C7D1B78 */  mr      r29, r3
/* 0A2C10 800A81B0 6F848000 */  xoris   r4, r28, 0x8000
/* 0A2C14 800A81B4 3B250000 */  addi    r25, r5, 0
/* 0A2C18 800A81B8 3BC60000 */  addi    r30, r6, 0
/* 0A2C1C 800A81BC 3BE70000 */  addi    r31, r7, 0
/* 0A2C20 800A81C0 80030018 */  lwz     r0, 0x18(r3)
/* 0A2C24 800A81C4 8103001C */  lwz     r8, 0x1c(r3)
/* 0A2C28 800A81C8 6C038000 */  xoris   r3, r0, 0x8000
/* 0A2C2C 800A81CC 7C08E010 */  subfc   r0, r8, r28
/* 0A2C30 800A81D0 7C632110 */  subfe   r3, r3, r4
/* 0A2C34 800A81D4 7C642110 */  subfe   r3, r4, r4
/* 0A2C38 800A81D8 7C6300D1 */  neg.    r3, r3
/* 0A2C3C 800A81DC 4182007C */  beq     lbl_800A8258
/* 0A2C40 800A81E0 48005B5D */  bl      __OSGetSystemTime
/* 0A2C44 800A81E4 80FD0020 */  lwz     r7, 0x20(r29)
/* 0A2C48 800A81E8 6C658000 */  xoris   r5, r3, 0x8000
/* 0A2C4C 800A81EC 811D0024 */  lwz     r8, 0x24(r29)
/* 0A2C50 800A81F0 6CE68000 */  xoris   r6, r7, 0x8000
/* 0A2C54 800A81F4 7C044010 */  subfc   r0, r4, r8
/* 0A2C58 800A81F8 7CA53110 */  subfe   r5, r5, r6
/* 0A2C5C 800A81FC 7CA63110 */  subfe   r5, r6, r6
/* 0A2C60 800A8200 7CA500D1 */  neg.    r5, r5
/* 0A2C64 800A8204 3BC80000 */  addi    r30, r8, 0
/* 0A2C68 800A8208 3B270000 */  addi    r25, r7, 0
/* 0A2C6C 800A820C 4182004C */  beq     lbl_800A8258
/* 0A2C70 800A8210 837D0018 */  lwz     r27, 0x18(r29)
/* 0A2C74 800A8214 7C882010 */  subfc   r4, r8, r4
/* 0A2C78 800A8218 835D001C */  lwz     r26, 0x1c(r29)
/* 0A2C7C 800A821C 7C671910 */  subfe   r3, r7, r3
/* 0A2C80 800A8220 38BB0000 */  addi    r5, r27, 0
/* 0A2C84 800A8224 38DA0000 */  addi    r6, r26, 0
/* 0A2C88 800A8228 48031981 */  bl      __div2i
/* 0A2C8C 800A822C 38000001 */  li      r0, 1
/* 0A2C90 800A8230 7CA40014 */  addc    r5, r4, r0
/* 0A2C94 800A8234 7C9B29D6 */  mullw   r4, r27, r5
/* 0A2C98 800A8238 7C1A2816 */  mulhwu  r0, r26, r5
/* 0A2C9C 800A823C 7C63E114 */  adde    r3, r3, r28
/* 0A2CA0 800A8240 7C840214 */  add     r4, r4, r0
/* 0A2CA4 800A8244 7C1A19D6 */  mullw   r0, r26, r3
/* 0A2CA8 800A8248 7C7A29D6 */  mullw   r3, r26, r5
/* 0A2CAC 800A824C 7C040214 */  add     r0, r4, r0
/* 0A2CB0 800A8250 7FDE1814 */  addc    r30, r30, r3
/* 0A2CB4 800A8254 7F390114 */  adde    r25, r25, r0
lbl_800A8258:
/* 0A2CB8 800A8258 93FD0000 */  stw     r31, 0(r29)
/* 0A2CBC 800A825C 6F248000 */  xoris   r4, r25, 0x8000
/* 0A2CC0 800A8260 93DD000C */  stw     r30, 0xc(r29)
/* 0A2CC4 800A8264 933D0008 */  stw     r25, 8(r29)
/* 0A2CC8 800A8268 80CD90F8 */  lwz     r6, AlarmQueue-_SDA_BASE_(r13)
/* 0A2CCC 800A826C 480000C4 */  b       lbl_800A8330
lbl_800A8270:
/* 0A2CD0 800A8270 80060008 */  lwz     r0, 8(r6)
/* 0A2CD4 800A8274 80A6000C */  lwz     r5, 0xc(r6)
/* 0A2CD8 800A8278 6C038000 */  xoris   r3, r0, 0x8000
/* 0A2CDC 800A827C 7C05F010 */  subfc   r0, r5, r30
/* 0A2CE0 800A8280 7C632110 */  subfe   r3, r3, r4
/* 0A2CE4 800A8284 7C642110 */  subfe   r3, r4, r4
/* 0A2CE8 800A8288 7C6300D1 */  neg.    r3, r3
/* 0A2CEC 800A828C 418200A0 */  beq     lbl_800A832C
/* 0A2CF0 800A8290 80060010 */  lwz     r0, 0x10(r6)
/* 0A2CF4 800A8294 901D0010 */  stw     r0, 0x10(r29)
/* 0A2CF8 800A8298 93A60010 */  stw     r29, 0x10(r6)
/* 0A2CFC 800A829C 90DD0014 */  stw     r6, 0x14(r29)
/* 0A2D00 800A82A0 807D0010 */  lwz     r3, 0x10(r29)
/* 0A2D04 800A82A4 28030000 */  cmplwi  r3, 0
/* 0A2D08 800A82A8 4182000C */  beq     lbl_800A82B4
/* 0A2D0C 800A82AC 93A30014 */  stw     r29, 0x14(r3)
/* 0A2D10 800A82B0 48000124 */  b       lbl_800A83D4
lbl_800A82B4:
/* 0A2D14 800A82B4 93AD90F8 */  stw     r29, AlarmQueue-_SDA_BASE_(r13)
/* 0A2D18 800A82B8 48005A85 */  bl      __OSGetSystemTime
/* 0A2D1C 800A82BC 80DD000C */  lwz     r6, 0xc(r29)
/* 0A2D20 800A82C0 38E00000 */  li      r7, 0
/* 0A2D24 800A82C4 801D0008 */  lwz     r0, 8(r29)
/* 0A2D28 800A82C8 6CE58000 */  xoris   r5, r7, 0x8000
/* 0A2D2C 800A82CC 7D043010 */  subfc   r8, r4, r6
/* 0A2D30 800A82D0 7C030110 */  subfe   r0, r3, r0
/* 0A2D34 800A82D4 6C068000 */  xoris   r6, r0, 0x8000
/* 0A2D38 800A82D8 7C074010 */  subfc   r0, r7, r8
/* 0A2D3C 800A82DC 7CA53110 */  subfe   r5, r5, r6
/* 0A2D40 800A82E0 7CA63110 */  subfe   r5, r6, r6
/* 0A2D44 800A82E4 7CA500D1 */  neg.    r5, r5
/* 0A2D48 800A82E8 41820010 */  beq     lbl_800A82F8
/* 0A2D4C 800A82EC 38600000 */  li      r3, 0
/* 0A2D50 800A82F0 4BFFF271 */  bl      PPCMtdec
/* 0A2D54 800A82F4 480000E0 */  b       lbl_800A83D4
lbl_800A82F8:
/* 0A2D58 800A82F8 3C808000 */  lis     r4, 0x8000
/* 0A2D5C 800A82FC 6CE38000 */  xoris   r3, r7, 0x8000
/* 0A2D60 800A8300 7C044010 */  subfc   r0, r4, r8
/* 0A2D64 800A8304 7C633110 */  subfe   r3, r3, r6
/* 0A2D68 800A8308 7C663110 */  subfe   r3, r6, r6
/* 0A2D6C 800A830C 7C6300D1 */  neg.    r3, r3
/* 0A2D70 800A8310 41820010 */  beq     lbl_800A8320
/* 0A2D74 800A8314 7D034378 */  mr      r3, r8
/* 0A2D78 800A8318 4BFFF249 */  bl      PPCMtdec
/* 0A2D7C 800A831C 480000B8 */  b       lbl_800A83D4
lbl_800A8320:
/* 0A2D80 800A8320 3864FFFF */  addi    r3, r4, -1
/* 0A2D84 800A8324 4BFFF23D */  bl      PPCMtdec
/* 0A2D88 800A8328 480000AC */  b       lbl_800A83D4
lbl_800A832C:
/* 0A2D8C 800A832C 80C60014 */  lwz     r6, 0x14(r6)
lbl_800A8330:
/* 0A2D90 800A8330 28060000 */  cmplwi  r6, 0
/* 0A2D94 800A8334 4082FF3C */  bne     lbl_800A8270
/* 0A2D98 800A8338 3BC00000 */  li      r30, 0
/* 0A2D9C 800A833C 93DD0014 */  stw     r30, 0x14(r29)
/* 0A2DA0 800A8340 386D90F8 */  addi    r3, r13, AlarmQueue-_SDA_BASE_
/* 0A2DA4 800A8344 80830004 */  lwz     r4, 4(r3)
/* 0A2DA8 800A8348 97A30004 */  stwu    r29, 4(r3)
/* 0A2DAC 800A834C 28040000 */  cmplwi  r4, 0
/* 0A2DB0 800A8350 909D0010 */  stw     r4, 0x10(r29)
/* 0A2DB4 800A8354 4182000C */  beq     lbl_800A8360
/* 0A2DB8 800A8358 93A40014 */  stw     r29, 0x14(r4)
/* 0A2DBC 800A835C 48000078 */  b       lbl_800A83D4
lbl_800A8360:
/* 0A2DC0 800A8360 93A30000 */  stw     r29, 0(r3)
/* 0A2DC4 800A8364 93AD90F8 */  stw     r29, AlarmQueue-_SDA_BASE_(r13)
/* 0A2DC8 800A8368 480059D5 */  bl      __OSGetSystemTime
/* 0A2DCC 800A836C 80DD000C */  lwz     r6, 0xc(r29)
/* 0A2DD0 800A8370 6FC58000 */  xoris   r5, r30, 0x8000
/* 0A2DD4 800A8374 801D0008 */  lwz     r0, 8(r29)
/* 0A2DD8 800A8378 7CE43010 */  subfc   r7, r4, r6
/* 0A2DDC 800A837C 7C030110 */  subfe   r0, r3, r0
/* 0A2DE0 800A8380 6C068000 */  xoris   r6, r0, 0x8000
/* 0A2DE4 800A8384 7C1E3810 */  subfc   r0, r30, r7
/* 0A2DE8 800A8388 7CA53110 */  subfe   r5, r5, r6
/* 0A2DEC 800A838C 7CA63110 */  subfe   r5, r6, r6
/* 0A2DF0 800A8390 7CA500D1 */  neg.    r5, r5
/* 0A2DF4 800A8394 41820010 */  beq     lbl_800A83A4
/* 0A2DF8 800A8398 38600000 */  li      r3, 0
/* 0A2DFC 800A839C 4BFFF1C5 */  bl      PPCMtdec
/* 0A2E00 800A83A0 48000034 */  b       lbl_800A83D4
lbl_800A83A4:
/* 0A2E04 800A83A4 3C808000 */  lis     r4, 0x8000
/* 0A2E08 800A83A8 6FC38000 */  xoris   r3, r30, 0x8000
/* 0A2E0C 800A83AC 7C043810 */  subfc   r0, r4, r7
/* 0A2E10 800A83B0 7C633110 */  subfe   r3, r3, r6
/* 0A2E14 800A83B4 7C663110 */  subfe   r3, r6, r6
/* 0A2E18 800A83B8 7C6300D1 */  neg.    r3, r3
/* 0A2E1C 800A83BC 41820010 */  beq     lbl_800A83CC
/* 0A2E20 800A83C0 7CE33B78 */  mr      r3, r7
/* 0A2E24 800A83C4 4BFFF19D */  bl      PPCMtdec
/* 0A2E28 800A83C8 4800000C */  b       lbl_800A83D4
lbl_800A83CC:
/* 0A2E2C 800A83CC 3864FFFF */  addi    r3, r4, -1
/* 0A2E30 800A83D0 4BFFF191 */  bl      PPCMtdec
lbl_800A83D4:
/* 0A2E34 800A83D4 BB210024 */  lmw     r25, 0x24(r1)
/* 0A2E38 800A83D8 80010044 */  lwz     r0, 0x44(r1)
/* 0A2E3C 800A83DC 38210040 */  addi    r1, r1, 0x40
/* 0A2E40 800A83E0 7C0803A6 */  mtlr    r0
/* 0A2E44 800A83E4 4E800020 */  blr     

glabel OSSetAlarm
/* 0A2E48 800A83E8 7C0802A6 */  mflr    r0
/* 0A2E4C 800A83EC 90010004 */  stw     r0, 4(r1)
/* 0A2E50 800A83F0 9421FFC8 */  stwu    r1, -0x38(r1)
/* 0A2E54 800A83F4 BF610024 */  stmw    r27, 0x24(r1)
/* 0A2E58 800A83F8 3B630000 */  addi    r27, r3, 0
/* 0A2E5C 800A83FC 3BA50000 */  addi    r29, r5, 0
/* 0A2E60 800A8400 3B860000 */  addi    r28, r6, 0
/* 0A2E64 800A8404 3BC70000 */  addi    r30, r7, 0
/* 0A2E68 800A8408 48002369 */  bl      OSDisableInterrupts
/* 0A2E6C 800A840C 38000000 */  li      r0, 0
/* 0A2E70 800A8410 901B001C */  stw     r0, 0x1c(r27)
/* 0A2E74 800A8414 7C7F1B78 */  mr      r31, r3
/* 0A2E78 800A8418 901B0018 */  stw     r0, 0x18(r27)
/* 0A2E7C 800A841C 48005921 */  bl      __OSGetSystemTime
/* 0A2E80 800A8420 7CDC2014 */  addc    r6, r28, r4
/* 0A2E84 800A8424 7CBD1914 */  adde    r5, r29, r3
/* 0A2E88 800A8428 387B0000 */  addi    r3, r27, 0
/* 0A2E8C 800A842C 38FE0000 */  addi    r7, r30, 0
/* 0A2E90 800A8430 4BFFFD69 */  bl      InsertAlarm
/* 0A2E94 800A8434 7FE3FB78 */  mr      r3, r31
/* 0A2E98 800A8438 48002361 */  bl      OSRestoreInterrupts
/* 0A2E9C 800A843C BB610024 */  lmw     r27, 0x24(r1)
/* 0A2EA0 800A8440 8001003C */  lwz     r0, 0x3c(r1)
/* 0A2EA4 800A8444 38210038 */  addi    r1, r1, 0x38
/* 0A2EA8 800A8448 7C0803A6 */  mtlr    r0
/* 0A2EAC 800A844C 4E800020 */  blr     

glabel OSCancelAlarm
/* 0A2EB0 800A8450 7C0802A6 */  mflr    r0
/* 0A2EB4 800A8454 90010004 */  stw     r0, 4(r1)
/* 0A2EB8 800A8458 9421FFE0 */  stwu    r1, -0x20(r1)
/* 0A2EBC 800A845C 93E1001C */  stw     r31, 0x1c(r1)
/* 0A2EC0 800A8460 93C10018 */  stw     r30, 0x18(r1)
/* 0A2EC4 800A8464 7C7E1B78 */  mr      r30, r3
/* 0A2EC8 800A8468 93A10014 */  stw     r29, 0x14(r1)
/* 0A2ECC 800A846C 48002305 */  bl      OSDisableInterrupts
/* 0A2ED0 800A8470 801E0000 */  lwz     r0, 0(r30)
/* 0A2ED4 800A8474 3BE30000 */  addi    r31, r3, 0
/* 0A2ED8 800A8478 28000000 */  cmplwi  r0, 0
/* 0A2EDC 800A847C 40820010 */  bne     lbl_800A848C
/* 0A2EE0 800A8480 7FE3FB78 */  mr      r3, r31
/* 0A2EE4 800A8484 48002315 */  bl      OSRestoreInterrupts
/* 0A2EE8 800A8488 480000C8 */  b       lbl_800A8550
lbl_800A848C:
/* 0A2EEC 800A848C 83BE0014 */  lwz     r29, 0x14(r30)
/* 0A2EF0 800A8490 281D0000 */  cmplwi  r29, 0
/* 0A2EF4 800A8494 40820014 */  bne     lbl_800A84A8
/* 0A2EF8 800A8498 801E0010 */  lwz     r0, 0x10(r30)
/* 0A2EFC 800A849C 386D90F8 */  addi    r3, r13, AlarmQueue-_SDA_BASE_
/* 0A2F00 800A84A0 90030004 */  stw     r0, 4(r3)
/* 0A2F04 800A84A4 4800000C */  b       lbl_800A84B0
lbl_800A84A8:
/* 0A2F08 800A84A8 801E0010 */  lwz     r0, 0x10(r30)
/* 0A2F0C 800A84AC 901D0010 */  stw     r0, 0x10(r29)
lbl_800A84B0:
/* 0A2F10 800A84B0 807E0010 */  lwz     r3, 0x10(r30)
/* 0A2F14 800A84B4 28030000 */  cmplwi  r3, 0
/* 0A2F18 800A84B8 4182000C */  beq     lbl_800A84C4
/* 0A2F1C 800A84BC 93A30014 */  stw     r29, 0x14(r3)
/* 0A2F20 800A84C0 48000080 */  b       lbl_800A8540
lbl_800A84C4:
/* 0A2F24 800A84C4 281D0000 */  cmplwi  r29, 0
/* 0A2F28 800A84C8 93AD90F8 */  stw     r29, AlarmQueue-_SDA_BASE_(r13)
/* 0A2F2C 800A84CC 41820074 */  beq     lbl_800A8540
/* 0A2F30 800A84D0 4800586D */  bl      __OSGetSystemTime
/* 0A2F34 800A84D4 80DD000C */  lwz     r6, 0xc(r29)
/* 0A2F38 800A84D8 38E00000 */  li      r7, 0
/* 0A2F3C 800A84DC 801D0008 */  lwz     r0, 8(r29)
/* 0A2F40 800A84E0 6CE58000 */  xoris   r5, r7, 0x8000
/* 0A2F44 800A84E4 7D043010 */  subfc   r8, r4, r6
/* 0A2F48 800A84E8 7C030110 */  subfe   r0, r3, r0
/* 0A2F4C 800A84EC 6C068000 */  xoris   r6, r0, 0x8000
/* 0A2F50 800A84F0 7C074010 */  subfc   r0, r7, r8
/* 0A2F54 800A84F4 7CA53110 */  subfe   r5, r5, r6
/* 0A2F58 800A84F8 7CA63110 */  subfe   r5, r6, r6
/* 0A2F5C 800A84FC 7CA500D1 */  neg.    r5, r5
/* 0A2F60 800A8500 41820010 */  beq     lbl_800A8510
/* 0A2F64 800A8504 38600000 */  li      r3, 0
/* 0A2F68 800A8508 4BFFF059 */  bl      PPCMtdec
/* 0A2F6C 800A850C 48000034 */  b       lbl_800A8540
lbl_800A8510:
/* 0A2F70 800A8510 3C808000 */  lis     r4, 0x8000
/* 0A2F74 800A8514 6CE38000 */  xoris   r3, r7, 0x8000
/* 0A2F78 800A8518 7C044010 */  subfc   r0, r4, r8
/* 0A2F7C 800A851C 7C633110 */  subfe   r3, r3, r6
/* 0A2F80 800A8520 7C663110 */  subfe   r3, r6, r6
/* 0A2F84 800A8524 7C6300D1 */  neg.    r3, r3
/* 0A2F88 800A8528 41820010 */  beq     lbl_800A8538
/* 0A2F8C 800A852C 7D034378 */  mr      r3, r8
/* 0A2F90 800A8530 4BFFF031 */  bl      PPCMtdec
/* 0A2F94 800A8534 4800000C */  b       lbl_800A8540
lbl_800A8538:
/* 0A2F98 800A8538 3864FFFF */  addi    r3, r4, -1
/* 0A2F9C 800A853C 4BFFF025 */  bl      PPCMtdec
lbl_800A8540:
/* 0A2FA0 800A8540 38000000 */  li      r0, 0
/* 0A2FA4 800A8544 901E0000 */  stw     r0, 0(r30)
/* 0A2FA8 800A8548 7FE3FB78 */  mr      r3, r31
/* 0A2FAC 800A854C 4800224D */  bl      OSRestoreInterrupts
lbl_800A8550:
/* 0A2FB0 800A8550 80010024 */  lwz     r0, 0x24(r1)
/* 0A2FB4 800A8554 83E1001C */  lwz     r31, 0x1c(r1)
/* 0A2FB8 800A8558 83C10018 */  lwz     r30, 0x18(r1)
/* 0A2FBC 800A855C 83A10014 */  lwz     r29, 0x14(r1)
/* 0A2FC0 800A8560 38210020 */  addi    r1, r1, 0x20
/* 0A2FC4 800A8564 7C0803A6 */  mtlr    r0
/* 0A2FC8 800A8568 4E800020 */  blr     

DecrementerExceptionCallback:
/* 0A2FCC 800A856C 7C0802A6 */  mflr    r0
/* 0A2FD0 800A8570 90010004 */  stw     r0, 4(r1)
/* 0A2FD4 800A8574 9421FD10 */  stwu    r1, -0x2f0(r1)
/* 0A2FD8 800A8578 93E102EC */  stw     r31, 0x2ec(r1)
/* 0A2FDC 800A857C 93C102E8 */  stw     r30, 0x2e8(r1)
/* 0A2FE0 800A8580 93A102E4 */  stw     r29, 0x2e4(r1)
/* 0A2FE4 800A8584 7C9D2378 */  mr      r29, r4
/* 0A2FE8 800A8588 938102E0 */  stw     r28, 0x2e0(r1)
/* 0A2FEC 800A858C 480057B1 */  bl      __OSGetSystemTime
/* 0A2FF0 800A8590 800D90F8 */  lwz     r0, AlarmQueue-_SDA_BASE_(r13)
/* 0A2FF4 800A8594 3B840000 */  addi    r28, r4, 0
/* 0A2FF8 800A8598 3BC30000 */  addi    r30, r3, 0
/* 0A2FFC 800A859C 28000000 */  cmplwi  r0, 0
/* 0A3000 800A85A0 7C1F0378 */  mr      r31, r0
/* 0A3004 800A85A4 4082000C */  bne     lbl_800A85B0
/* 0A3008 800A85A8 7FA3EB78 */  mr      r3, r29
/* 0A300C 800A85AC 4800158D */  bl      OSLoadContext
lbl_800A85B0:
/* 0A3010 800A85B0 801F0008 */  lwz     r0, 8(r31)
/* 0A3014 800A85B4 6FC48000 */  xoris   r4, r30, 0x8000
/* 0A3018 800A85B8 80BF000C */  lwz     r5, 0xc(r31)
/* 0A301C 800A85BC 6C038000 */  xoris   r3, r0, 0x8000
/* 0A3020 800A85C0 7C05E010 */  subfc   r0, r5, r28
/* 0A3024 800A85C4 7C632110 */  subfe   r3, r3, r4
/* 0A3028 800A85C8 7C642110 */  subfe   r3, r4, r4
/* 0A302C 800A85CC 7C6300D1 */  neg.    r3, r3
/* 0A3030 800A85D0 4182007C */  beq     lbl_800A864C
/* 0A3034 800A85D4 48005769 */  bl      __OSGetSystemTime
/* 0A3038 800A85D8 80DF000C */  lwz     r6, 0xc(r31)
/* 0A303C 800A85DC 38E00000 */  li      r7, 0
/* 0A3040 800A85E0 801F0008 */  lwz     r0, 8(r31)
/* 0A3044 800A85E4 6CE58000 */  xoris   r5, r7, 0x8000
/* 0A3048 800A85E8 7D043010 */  subfc   r8, r4, r6
/* 0A304C 800A85EC 7C030110 */  subfe   r0, r3, r0
/* 0A3050 800A85F0 6C068000 */  xoris   r6, r0, 0x8000
/* 0A3054 800A85F4 7C074010 */  subfc   r0, r7, r8
/* 0A3058 800A85F8 7CA53110 */  subfe   r5, r5, r6
/* 0A305C 800A85FC 7CA63110 */  subfe   r5, r6, r6
/* 0A3060 800A8600 7CA500D1 */  neg.    r5, r5
/* 0A3064 800A8604 41820010 */  beq     lbl_800A8614
/* 0A3068 800A8608 38600000 */  li      r3, 0
/* 0A306C 800A860C 4BFFEF55 */  bl      PPCMtdec
/* 0A3070 800A8610 48000034 */  b       lbl_800A8644
lbl_800A8614:
/* 0A3074 800A8614 3C808000 */  lis     r4, 0x8000
/* 0A3078 800A8618 6CE38000 */  xoris   r3, r7, 0x8000
/* 0A307C 800A861C 7C044010 */  subfc   r0, r4, r8
/* 0A3080 800A8620 7C633110 */  subfe   r3, r3, r6
/* 0A3084 800A8624 7C663110 */  subfe   r3, r6, r6
/* 0A3088 800A8628 7C6300D1 */  neg.    r3, r3
/* 0A308C 800A862C 41820010 */  beq     lbl_800A863C
/* 0A3090 800A8630 7D034378 */  mr      r3, r8
/* 0A3094 800A8634 4BFFEF2D */  bl      PPCMtdec
/* 0A3098 800A8638 4800000C */  b       lbl_800A8644
lbl_800A863C:
/* 0A309C 800A863C 3864FFFF */  addi    r3, r4, -1
/* 0A30A0 800A8640 4BFFEF21 */  bl      PPCMtdec
lbl_800A8644:
/* 0A30A4 800A8644 7FA3EB78 */  mr      r3, r29
/* 0A30A8 800A8648 480014F1 */  bl      OSLoadContext
lbl_800A864C:
/* 0A30AC 800A864C 807F0014 */  lwz     r3, 0x14(r31)
/* 0A30B0 800A8650 28030000 */  cmplwi  r3, 0
/* 0A30B4 800A8654 906D90F8 */  stw     r3, AlarmQueue-_SDA_BASE_(r13)
/* 0A30B8 800A8658 40820014 */  bne     lbl_800A866C
/* 0A30BC 800A865C 38000000 */  li      r0, 0
/* 0A30C0 800A8660 386D90F8 */  addi    r3, r13, AlarmQueue-_SDA_BASE_
/* 0A30C4 800A8664 90030004 */  stw     r0, 4(r3)
/* 0A30C8 800A8668 4800000C */  b       lbl_800A8674
lbl_800A866C:
/* 0A30CC 800A866C 38000000 */  li      r0, 0
/* 0A30D0 800A8670 90030010 */  stw     r0, 0x10(r3)
lbl_800A8674:
/* 0A30D4 800A8674 83DF0000 */  lwz     r30, 0(r31)
/* 0A30D8 800A8678 38C00000 */  li      r6, 0
/* 0A30DC 800A867C 6CC48000 */  xoris   r4, r6, 0x8000
/* 0A30E0 800A8680 90DF0000 */  stw     r6, 0(r31)
/* 0A30E4 800A8684 801F0018 */  lwz     r0, 0x18(r31)
/* 0A30E8 800A8688 80BF001C */  lwz     r5, 0x1c(r31)
/* 0A30EC 800A868C 6C038000 */  xoris   r3, r0, 0x8000
/* 0A30F0 800A8690 7C053010 */  subfc   r0, r5, r6
/* 0A30F4 800A8694 7C632110 */  subfe   r3, r3, r4
/* 0A30F8 800A8698 7C642110 */  subfe   r3, r4, r4
/* 0A30FC 800A869C 7C6300D1 */  neg.    r3, r3
/* 0A3100 800A86A0 41820018 */  beq     lbl_800A86B8
/* 0A3104 800A86A4 387F0000 */  addi    r3, r31, 0
/* 0A3108 800A86A8 38FE0000 */  addi    r7, r30, 0
/* 0A310C 800A86AC 38C00000 */  li      r6, 0
/* 0A3110 800A86B0 38A00000 */  li      r5, 0
/* 0A3114 800A86B4 4BFFFAE5 */  bl      InsertAlarm
lbl_800A86B8:
/* 0A3118 800A86B8 838D90F8 */  lwz     r28, AlarmQueue-_SDA_BASE_(r13)
/* 0A311C 800A86BC 281C0000 */  cmplwi  r28, 0
/* 0A3120 800A86C0 41820074 */  beq     lbl_800A8734
/* 0A3124 800A86C4 48005679 */  bl      __OSGetSystemTime
/* 0A3128 800A86C8 80DC000C */  lwz     r6, 0xc(r28)
/* 0A312C 800A86CC 38E00000 */  li      r7, 0
/* 0A3130 800A86D0 801C0008 */  lwz     r0, 8(r28)
/* 0A3134 800A86D4 6CE58000 */  xoris   r5, r7, 0x8000
/* 0A3138 800A86D8 7D043010 */  subfc   r8, r4, r6
/* 0A313C 800A86DC 7C030110 */  subfe   r0, r3, r0
/* 0A3140 800A86E0 6C068000 */  xoris   r6, r0, 0x8000
/* 0A3144 800A86E4 7C074010 */  subfc   r0, r7, r8
/* 0A3148 800A86E8 7CA53110 */  subfe   r5, r5, r6
/* 0A314C 800A86EC 7CA63110 */  subfe   r5, r6, r6
/* 0A3150 800A86F0 7CA500D1 */  neg.    r5, r5
/* 0A3154 800A86F4 41820010 */  beq     lbl_800A8704
/* 0A3158 800A86F8 38600000 */  li      r3, 0
/* 0A315C 800A86FC 4BFFEE65 */  bl      PPCMtdec
/* 0A3160 800A8700 48000034 */  b       lbl_800A8734
lbl_800A8704:
/* 0A3164 800A8704 3C808000 */  lis     r4, 0x8000
/* 0A3168 800A8708 6CE38000 */  xoris   r3, r7, 0x8000
/* 0A316C 800A870C 7C044010 */  subfc   r0, r4, r8
/* 0A3170 800A8710 7C633110 */  subfe   r3, r3, r6
/* 0A3174 800A8714 7C663110 */  subfe   r3, r6, r6
/* 0A3178 800A8718 7C6300D1 */  neg.    r3, r3
/* 0A317C 800A871C 41820010 */  beq     lbl_800A872C
/* 0A3180 800A8720 7D034378 */  mr      r3, r8
/* 0A3184 800A8724 4BFFEE3D */  bl      PPCMtdec
/* 0A3188 800A8728 4800000C */  b       lbl_800A8734
lbl_800A872C:
/* 0A318C 800A872C 3864FFFF */  addi    r3, r4, -1
/* 0A3190 800A8730 4BFFEE31 */  bl      PPCMtdec
lbl_800A8734:
/* 0A3194 800A8734 48004591 */  bl      OSDisableScheduler
/* 0A3198 800A8738 38610018 */  addi    r3, r1, 0x18
/* 0A319C 800A873C 480014DD */  bl      OSClearContext
/* 0A31A0 800A8740 38610018 */  addi    r3, r1, 0x18
/* 0A31A4 800A8744 4800130D */  bl      OSSetCurrentContext
/* 0A31A8 800A8748 399E0000 */  addi    r12, r30, 0
/* 0A31AC 800A874C 7D8803A6 */  mtlr    r12
/* 0A31B0 800A8750 387F0000 */  addi    r3, r31, 0
/* 0A31B4 800A8754 389D0000 */  addi    r4, r29, 0
/* 0A31B8 800A8758 4E800021 */  blrl    
/* 0A31BC 800A875C 38610018 */  addi    r3, r1, 0x18
/* 0A31C0 800A8760 480014B9 */  bl      OSClearContext
/* 0A31C4 800A8764 7FA3EB78 */  mr      r3, r29
/* 0A31C8 800A8768 480012E9 */  bl      OSSetCurrentContext
/* 0A31CC 800A876C 48004599 */  bl      OSEnableScheduler
/* 0A31D0 800A8770 48004A61 */  bl      __OSReschedule
/* 0A31D4 800A8774 7FA3EB78 */  mr      r3, r29
/* 0A31D8 800A8778 480013C1 */  bl      OSLoadContext
/* 0A31DC 800A877C 800102F4 */  lwz     r0, 0x2f4(r1)
/* 0A31E0 800A8780 83E102EC */  lwz     r31, 0x2ec(r1)
/* 0A31E4 800A8784 83C102E8 */  lwz     r30, 0x2e8(r1)
/* 0A31E8 800A8788 83A102E4 */  lwz     r29, 0x2e4(r1)
/* 0A31EC 800A878C 838102E0 */  lwz     r28, 0x2e0(r1)
/* 0A31F0 800A8790 382102F0 */  addi    r1, r1, 0x2f0
/* 0A31F4 800A8794 7C0803A6 */  mtlr    r0
/* 0A31F8 800A8798 4E800020 */  blr     

DecrementerExceptionHandler:
/* 0A31FC 800A879C 90040000 */  stw     r0, 0(r4)
/* 0A3200 800A87A0 90240004 */  stw     r1, 4(r4)
/* 0A3204 800A87A4 90440008 */  stw     r2, 8(r4)
/* 0A3208 800A87A8 BCC40018 */  stmw    r6, 0x18(r4)
/* 0A320C 800A87AC 7C11E2A6 */  mfspr   r0, 0x391
/* 0A3210 800A87B0 900401A8 */  stw     r0, 0x1a8(r4)
/* 0A3214 800A87B4 7C12E2A6 */  mfspr   r0, 0x392
/* 0A3218 800A87B8 900401AC */  stw     r0, 0x1ac(r4)
/* 0A321C 800A87BC 7C13E2A6 */  mfspr   r0, 0x393
/* 0A3220 800A87C0 900401B0 */  stw     r0, 0x1b0(r4)
/* 0A3224 800A87C4 7C14E2A6 */  mfspr   r0, 0x394
/* 0A3228 800A87C8 900401B4 */  stw     r0, 0x1b4(r4)
/* 0A322C 800A87CC 7C15E2A6 */  mfspr   r0, 0x395
/* 0A3230 800A87D0 900401B8 */  stw     r0, 0x1b8(r4)
/* 0A3234 800A87D4 7C16E2A6 */  mfspr   r0, 0x396
/* 0A3238 800A87D8 900401BC */  stw     r0, 0x1bc(r4)
/* 0A323C 800A87DC 7C17E2A6 */  mfspr   r0, 0x397
/* 0A3240 800A87E0 900401C0 */  stw     r0, 0x1c0(r4)
/* 0A3244 800A87E4 9421FFF8 */  stwu    r1, -8(r1)
/* 0A3248 800A87E8 4BFFFD84 */  b       DecrementerExceptionCallback

OnReset:
/* 0A324C 800A87EC 7C0802A6 */  mflr    r0
/* 0A3250 800A87F0 90010004 */  stw     r0, 4(r1)
/* 0A3254 800A87F4 9421FFE8 */  stwu    r1, -0x18(r1)
/* 0A3258 800A87F8 93E10014 */  stw     r31, 0x14(r1)
/* 0A325C 800A87FC 93C10010 */  stw     r30, 0x10(r1)
/* 0A3260 800A8800 2C030000 */  cmpwi   r3, 0
/* 0A3264 800A8804 4182006C */  beq     lbl_800A8870
/* 0A3268 800A8808 800D90F8 */  lwz     r0, AlarmQueue-_SDA_BASE_(r13)
/* 0A326C 800A880C 28000000 */  cmplwi  r0, 0
/* 0A3270 800A8810 7C1F0378 */  mr      r31, r0
/* 0A3274 800A8814 4182000C */  beq     lbl_800A8820
/* 0A3278 800A8818 801F0014 */  lwz     r0, 0x14(r31)
/* 0A327C 800A881C 48000008 */  b       lbl_800A8824
lbl_800A8820:
/* 0A3280 800A8820 38000000 */  li      r0, 0
lbl_800A8824:
/* 0A3284 800A8824 7C1E0378 */  mr      r30, r0
/* 0A3288 800A8828 48000004 */  b       lbl_800A882C
lbl_800A882C:
/* 0A328C 800A882C 48000004 */  b       lbl_800A8830
lbl_800A8830:
/* 0A3290 800A8830 48000038 */  b       lbl_800A8868
lbl_800A8834:
/* 0A3294 800A8834 7FE3FB78 */  mr      r3, r31
/* 0A3298 800A8838 48018FC1 */  bl      __DVDTestAlarm
/* 0A329C 800A883C 2C030000 */  cmpwi   r3, 0
/* 0A32A0 800A8840 4082000C */  bne     lbl_800A884C
/* 0A32A4 800A8844 7FE3FB78 */  mr      r3, r31
/* 0A32A8 800A8848 4BFFFC09 */  bl      OSCancelAlarm
lbl_800A884C:
/* 0A32AC 800A884C 281E0000 */  cmplwi  r30, 0
/* 0A32B0 800A8850 7FDFF378 */  mr      r31, r30
/* 0A32B4 800A8854 4182000C */  beq     lbl_800A8860
/* 0A32B8 800A8858 801E0014 */  lwz     r0, 0x14(r30)
/* 0A32BC 800A885C 48000008 */  b       lbl_800A8864
lbl_800A8860:
/* 0A32C0 800A8860 38000000 */  li      r0, 0
lbl_800A8864:
/* 0A32C4 800A8864 7C1E0378 */  mr      r30, r0
lbl_800A8868:
/* 0A32C8 800A8868 281F0000 */  cmplwi  r31, 0
/* 0A32CC 800A886C 4082FFC8 */  bne     lbl_800A8834
lbl_800A8870:
/* 0A32D0 800A8870 38600001 */  li      r3, 1
/* 0A32D4 800A8874 8001001C */  lwz     r0, 0x1c(r1)
/* 0A32D8 800A8878 83E10014 */  lwz     r31, 0x14(r1)
/* 0A32DC 800A887C 83C10010 */  lwz     r30, 0x10(r1)
/* 0A32E0 800A8880 38210018 */  addi    r1, r1, 0x18
/* 0A32E4 800A8884 7C0803A6 */  mtlr    r0
/* 0A32E8 800A8888 4E800020 */  blr     


.section .data, "wa"

.balign 8

/* 000FB8F0 800FE870 0010 */
ResetFunctionInfo:
    .long OnReset, 0xFFFFFFFF, 0x00000000, 0x00000000


.section .sbss, "wa"

.balign 8

/* 00100338 80145AD8 0008 */
AlarmQueue:
    .skip 8


