# sram.c
.include "macros.inc"

.section .text, "ax"

.balign 4

glabel sramEvent
/* 093140 800986E0 7C0802A6 */  mflr	r0
/* 093144 800986E4 2C040003 */  cmpwi	r4, 3
/* 093148 800986E8 90010004 */  stw		r0, 4(r1)
/* 09314C 800986EC 9421FFE0 */  stwu	r1, -0x20(r1)
/* 093150 800986F0 93E1001C */  stw		r31, 0x1c(r1)
/* 093154 800986F4 3BE50000 */  addi	r31, r5, 0
/* 093158 800986F8 93C10018 */  stw		r30, 0x18(r1)
/* 09315C 800986FC 3BC30000 */  addi	r30, r3, 0
/* 093160 80098700 418200C4 */  beq		lbl_800987C4
/* 093164 80098704 40800018 */  bge		lbl_8009871C
/* 093168 80098708 2C040002 */  cmpwi	r4, 2
/* 09316C 8009870C 40800028 */  bge		lbl_80098734
/* 093170 80098710 2C040000 */  cmpwi	r4, 0
/* 093174 80098714 408000B0 */  bge		lbl_800987C4
/* 093178 80098718 480000A4 */  b		lbl_800987BC
lbl_8009871C:
/* 09317C 8009871C 2C041003 */  cmpwi	r4, 0x1003
/* 093180 80098720 418200A4 */  beq		lbl_800987C4
/* 093184 80098724 40800098 */  bge		lbl_800987BC
/* 093188 80098728 2C041002 */  cmpwi	r4, 0x1002
/* 09318C 8009872C 40800010 */  bge		lbl_8009873C
/* 093190 80098730 4800008C */  b		lbl_800987BC
lbl_80098734:
/* 093194 80098734 93FE0000 */  stw		r31, 0(r30)
/* 093198 80098738 4800008C */  b		lbl_800987C4
lbl_8009873C:
/* 09319C 8009873C 807E0000 */  lwz		r3, 0(r30)
/* 0931A0 80098740 3CA0800A */  lis		r5, sramPut8@ha
/* 0931A4 80098744 3CC0800A */  lis		r6, sramPut16@ha
/* 0931A8 80098748 3CE0800A */  lis		r7, sramPut32@ha
/* 0931AC 8009874C 80630024 */  lwz		r3, 0x24(r3)
/* 0931B0 80098750 3C80800A */  lis		r4, sramPut64@ha
/* 0931B4 80098754 390488A0 */  addi	r8, r4, sramPut64@l
/* 0931B8 80098758 38A58930 */  addi	r5, r5, sramPut8@l
/* 0931BC 8009875C 38C68900 */  addi	r6, r6, sramPut16@l
/* 0931C0 80098760 38E788D0 */  addi	r7, r7, sramPut32@l
/* 0931C4 80098764 389F0000 */  addi	r4, r31, 0
/* 0931C8 80098768 4BF9C7B9 */  bl		cpuSetDevicePut
/* 0931CC 8009876C 2C030000 */  cmpwi	r3, 0
/* 0931D0 80098770 4082000C */  bne		lbl_8009877C
/* 0931D4 80098774 38600000 */  li		r3, 0
/* 0931D8 80098778 48000050 */  b		lbl_800987C8
lbl_8009877C:
/* 0931DC 8009877C 807E0000 */  lwz		r3, 0(r30)
/* 0931E0 80098780 3CA0800A */  lis		r5, sramGet8@ha
/* 0931E4 80098784 3CC0800A */  lis		r6, sramGet16@ha
/* 0931E8 80098788 3CE0800A */  lis		r7, sramGet32@ha
/* 0931EC 8009878C 80630024 */  lwz		r3, 0x24(r3)
/* 0931F0 80098790 3C80800A */  lis		r4, sramGet64@ha
/* 0931F4 80098794 390487E0 */  addi	r8, r4, sramGet64@l
/* 0931F8 80098798 38A58870 */  addi	r5, r5, sramGet8@l
/* 0931FC 8009879C 38C68840 */  addi	r6, r6, sramGet16@l
/* 093200 800987A0 38E78810 */  addi	r7, r7, sramGet32@l
/* 093204 800987A4 389F0000 */  addi	r4, r31, 0
/* 093208 800987A8 4BF9C791 */  bl		cpuSetDeviceGet
/* 09320C 800987AC 2C030000 */  cmpwi	r3, 0
/* 093210 800987B0 40820014 */  bne		lbl_800987C4
/* 093214 800987B4 38600000 */  li		r3, 0
/* 093218 800987B8 48000010 */  b		lbl_800987C8
lbl_800987BC:
/* 09321C 800987BC 38600000 */  li		r3, 0
/* 093220 800987C0 48000008 */  b		lbl_800987C8
lbl_800987C4:
/* 093224 800987C4 38600001 */  li		r3, 1
lbl_800987C8:
/* 093228 800987C8 80010024 */  lwz		r0, 0x24(r1)
/* 09322C 800987CC 83E1001C */  lwz		r31, 0x1c(r1)
/* 093230 800987D0 83C10018 */  lwz		r30, 0x18(r1)
/* 093234 800987D4 7C0803A6 */  mtlr	r0
/* 093238 800987D8 38210020 */  addi	r1, r1, 0x20
/* 09323C 800987DC 4E800020 */  blr		

sramGet64:
/* 093240 800987E0 7C0802A6 */  mflr	r0
/* 093244 800987E4 5483047E */  clrlwi	r3, r4, 0x11
/* 093248 800987E8 90010004 */  stw		r0, 4(r1)
/* 09324C 800987EC 38850000 */  addi	r4, r5, 0
/* 093250 800987F0 38A00008 */  li		r5, 8
/* 093254 800987F4 9421FFF8 */  stwu	r1, -8(r1)
/* 093258 800987F8 4BF70CD5 */  bl		simulatorReadSRAM
/* 09325C 800987FC 8001000C */  lwz		r0, 0xc(r1)
/* 093260 80098800 38600001 */  li		r3, 1
/* 093264 80098804 38210008 */  addi	r1, r1, 8
/* 093268 80098808 7C0803A6 */  mtlr	r0
/* 09326C 8009880C 4E800020 */  blr		

sramGet32:
/* 093270 80098810 7C0802A6 */  mflr	r0
/* 093274 80098814 5483047E */  clrlwi	r3, r4, 0x11
/* 093278 80098818 90010004 */  stw		r0, 4(r1)
/* 09327C 8009881C 38850000 */  addi	r4, r5, 0
/* 093280 80098820 38A00004 */  li		r5, 4
/* 093284 80098824 9421FFF8 */  stwu	r1, -8(r1)
/* 093288 80098828 4BF70CA5 */  bl		simulatorReadSRAM
/* 09328C 8009882C 8001000C */  lwz		r0, 0xc(r1)
/* 093290 80098830 38600001 */  li		r3, 1
/* 093294 80098834 38210008 */  addi	r1, r1, 8
/* 093298 80098838 7C0803A6 */  mtlr	r0
/* 09329C 8009883C 4E800020 */  blr		

sramGet16:
/* 0932A0 80098840 7C0802A6 */  mflr	r0
/* 0932A4 80098844 5483047E */  clrlwi	r3, r4, 0x11
/* 0932A8 80098848 90010004 */  stw		r0, 4(r1)
/* 0932AC 8009884C 38850000 */  addi	r4, r5, 0
/* 0932B0 80098850 38A00002 */  li		r5, 2
/* 0932B4 80098854 9421FFF8 */  stwu	r1, -8(r1)
/* 0932B8 80098858 4BF70C75 */  bl		simulatorReadSRAM
/* 0932BC 8009885C 8001000C */  lwz		r0, 0xc(r1)
/* 0932C0 80098860 38600001 */  li		r3, 1
/* 0932C4 80098864 38210008 */  addi	r1, r1, 8
/* 0932C8 80098868 7C0803A6 */  mtlr	r0
/* 0932CC 8009886C 4E800020 */  blr		

sramGet8:
/* 0932D0 80098870 7C0802A6 */  mflr	r0
/* 0932D4 80098874 5483047E */  clrlwi	r3, r4, 0x11
/* 0932D8 80098878 90010004 */  stw		r0, 4(r1)
/* 0932DC 8009887C 38850000 */  addi	r4, r5, 0
/* 0932E0 80098880 38A00001 */  li		r5, 1
/* 0932E4 80098884 9421FFF8 */  stwu	r1, -8(r1)
/* 0932E8 80098888 4BF70C45 */  bl		simulatorReadSRAM
/* 0932EC 8009888C 8001000C */  lwz		r0, 0xc(r1)
/* 0932F0 80098890 38600001 */  li		r3, 1
/* 0932F4 80098894 38210008 */  addi	r1, r1, 8
/* 0932F8 80098898 7C0803A6 */  mtlr	r0
/* 0932FC 8009889C 4E800020 */  blr		

sramPut64:
/* 093300 800988A0 7C0802A6 */  mflr	r0
/* 093304 800988A4 5483047E */  clrlwi	r3, r4, 0x11
/* 093308 800988A8 90010004 */  stw		r0, 4(r1)
/* 09330C 800988AC 38850000 */  addi	r4, r5, 0
/* 093310 800988B0 38A00008 */  li		r5, 8
/* 093314 800988B4 9421FFF8 */  stwu	r1, -8(r1)
/* 093318 800988B8 4BF70BE1 */  bl		simulatorWriteSRAM
/* 09331C 800988BC 8001000C */  lwz		r0, 0xc(r1)
/* 093320 800988C0 38600001 */  li		r3, 1
/* 093324 800988C4 38210008 */  addi	r1, r1, 8
/* 093328 800988C8 7C0803A6 */  mtlr	r0
/* 09332C 800988CC 4E800020 */  blr		

sramPut32:
/* 093330 800988D0 7C0802A6 */  mflr	r0
/* 093334 800988D4 5483047E */  clrlwi	r3, r4, 0x11
/* 093338 800988D8 90010004 */  stw		r0, 4(r1)
/* 09333C 800988DC 38850000 */  addi	r4, r5, 0
/* 093340 800988E0 38A00004 */  li		r5, 4
/* 093344 800988E4 9421FFF8 */  stwu	r1, -8(r1)
/* 093348 800988E8 4BF70BB1 */  bl		simulatorWriteSRAM
/* 09334C 800988EC 8001000C */  lwz		r0, 0xc(r1)
/* 093350 800988F0 38600001 */  li		r3, 1
/* 093354 800988F4 38210008 */  addi	r1, r1, 8
/* 093358 800988F8 7C0803A6 */  mtlr	r0
/* 09335C 800988FC 4E800020 */  blr		

sramPut16:
/* 093360 80098900 7C0802A6 */  mflr	r0
/* 093364 80098904 5483047E */  clrlwi	r3, r4, 0x11
/* 093368 80098908 90010004 */  stw		r0, 4(r1)
/* 09336C 8009890C 38850000 */  addi	r4, r5, 0
/* 093370 80098910 38A00002 */  li		r5, 2
/* 093374 80098914 9421FFF8 */  stwu	r1, -8(r1)
/* 093378 80098918 4BF70B81 */  bl		simulatorWriteSRAM
/* 09337C 8009891C 8001000C */  lwz		r0, 0xc(r1)
/* 093380 80098920 38600001 */  li		r3, 1
/* 093384 80098924 38210008 */  addi	r1, r1, 8
/* 093388 80098928 7C0803A6 */  mtlr	r0
/* 09338C 8009892C 4E800020 */  blr		

sramPut8:
/* 093390 80098930 7C0802A6 */  mflr	r0
/* 093394 80098934 5483047E */  clrlwi	r3, r4, 0x11
/* 093398 80098938 90010004 */  stw		r0, 4(r1)
/* 09339C 8009893C 38850000 */  addi	r4, r5, 0
/* 0933A0 80098940 38A00001 */  li		r5, 1
/* 0933A4 80098944 9421FFF8 */  stwu	r1, -8(r1)
/* 0933A8 80098948 4BF70B51 */  bl		simulatorWriteSRAM
/* 0933AC 8009894C 8001000C */  lwz		r0, 0xc(r1)
/* 0933B0 80098950 38600001 */  li		r3, 1
/* 0933B4 80098954 38210008 */  addi	r1, r1, 8
/* 0933B8 80098958 7C0803A6 */  mtlr	r0
/* 0933BC 8009895C 4E800020 */  blr		

glabel sramTransferSRAM
/* 0933C0 80098960 7C0802A6 */  mflr	r0
/* 0933C4 80098964 90010004 */  stw		r0, 4(r1)
/* 0933C8 80098968 9421FFD8 */  stwu	r1, -0x28(r1)
/* 0933CC 8009896C 93E10024 */  stw		r31, 0x24(r1)
/* 0933D0 80098970 7CBF2B78 */  mr		r31, r5
/* 0933D4 80098974 38A40000 */  addi	r5, r4, 0
/* 0933D8 80098978 90C10014 */  stw		r6, 0x14(r1)
/* 0933DC 8009897C 38810018 */  addi	r4, r1, 0x18
/* 0933E0 80098980 38C10014 */  addi	r6, r1, 0x14
/* 0933E4 80098984 80630000 */  lwz		r3, 0(r3)
/* 0933E8 80098988 8063002C */  lwz		r3, 0x2c(r3)
/* 0933EC 8009898C 4BFD9949 */  bl		ramGetBuffer
/* 0933F0 80098990 2C030000 */  cmpwi	r3, 0
/* 0933F4 80098994 4082000C */  bne		lbl_800989A0
/* 0933F8 80098998 38600000 */  li		r3, 0
/* 0933FC 8009899C 48000028 */  b		lbl_800989C4
lbl_800989A0:
/* 093400 800989A0 80810018 */  lwz		r4, 0x18(r1)
/* 093404 800989A4 57E3047E */  clrlwi	r3, r31, 0x11
/* 093408 800989A8 80A10014 */  lwz		r5, 0x14(r1)
/* 09340C 800989AC 4BF70AED */  bl		simulatorWriteSRAM
/* 093410 800989B0 2C030000 */  cmpwi	r3, 0
/* 093414 800989B4 4082000C */  bne		lbl_800989C0
/* 093418 800989B8 38600000 */  li		r3, 0
/* 09341C 800989BC 48000008 */  b		lbl_800989C4
lbl_800989C0:
/* 093420 800989C0 38600001 */  li		r3, 1
lbl_800989C4:
/* 093424 800989C4 8001002C */  lwz		r0, 0x2c(r1)
/* 093428 800989C8 83E10024 */  lwz		r31, 0x24(r1)
/* 09342C 800989CC 38210028 */  addi	r1, r1, 0x28
/* 093430 800989D0 7C0803A6 */  mtlr	r0
/* 093434 800989D4 4E800020 */  blr		

glabel sramCopySRAM
/* 093438 800989D8 7C0802A6 */  mflr	r0
/* 09343C 800989DC 90010004 */  stw		r0, 4(r1)
/* 093440 800989E0 9421FFD8 */  stwu	r1, -0x28(r1)
/* 093444 800989E4 93E10024 */  stw		r31, 0x24(r1)
/* 093448 800989E8 7CBF2B78 */  mr		r31, r5
/* 09344C 800989EC 38A40000 */  addi	r5, r4, 0
/* 093450 800989F0 90C10014 */  stw		r6, 0x14(r1)
/* 093454 800989F4 38810018 */  addi	r4, r1, 0x18
/* 093458 800989F8 38C10014 */  addi	r6, r1, 0x14
/* 09345C 800989FC 80630000 */  lwz		r3, 0(r3)
/* 093460 80098A00 8063002C */  lwz		r3, 0x2c(r3)
/* 093464 80098A04 4BFD98D1 */  bl		ramGetBuffer
/* 093468 80098A08 2C030000 */  cmpwi	r3, 0
/* 09346C 80098A0C 4082000C */  bne		lbl_80098A18
/* 093470 80098A10 38600000 */  li		r3, 0
/* 093474 80098A14 48000028 */  b		lbl_80098A3C
lbl_80098A18:
/* 093478 80098A18 80810018 */  lwz		r4, 0x18(r1)
/* 09347C 80098A1C 57E3047E */  clrlwi	r3, r31, 0x11
/* 093480 80098A20 80A10014 */  lwz		r5, 0x14(r1)
/* 093484 80098A24 4BF70AA9 */  bl		simulatorReadSRAM
/* 093488 80098A28 2C030000 */  cmpwi	r3, 0
/* 09348C 80098A2C 4082000C */  bne		lbl_80098A38
/* 093490 80098A30 38600000 */  li		r3, 0
/* 093494 80098A34 48000008 */  b		lbl_80098A3C
lbl_80098A38:
/* 093498 80098A38 38600001 */  li		r3, 1
lbl_80098A3C:
/* 09349C 80098A3C 8001002C */  lwz		r0, 0x2c(r1)
/* 0934A0 80098A40 83E10024 */  lwz		r31, 0x24(r1)
/* 0934A4 80098A44 38210028 */  addi	r1, r1, 0x28
/* 0934A8 80098A48 7C0803A6 */  mtlr	r0
/* 0934AC 80098A4C 4E800020 */  blr		


.section .data, "wa"

.balign 8

/* 000F90E0 800FC060 0010 */
glabel gClassSram
    .long D_801455B0, 0x00000004, 0x00000000, sramEvent


.section .sdata, "wa"

.balign 8

/* 000FFE10 801455B0 0005 */
D_801455B0:
    .asciz "SRAM"


