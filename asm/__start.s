# __start.c
.include "macros.inc"

.section .init, "ax"

.balign 4

__check_pad3:
/* 000000 80003100 7C0802A6 */  mflr	r0
/* 000004 80003104 3C608000 */  lis		r3, 0x8000
/* 000008 80003108 90010004 */  stw		r0, 4(r1)
/* 00000C 8000310C 9421FFF8 */  stwu	r1, -8(r1)
/* 000010 80003110 A00330E4 */  lhz		r0, 0x30e4(r3)
/* 000014 80003114 70000EEF */  andi.	r0, r0, 0xeef
/* 000018 80003118 2C000EEF */  cmpwi	r0, 0xeef
/* 00001C 8000311C 40820014 */  bne		lbl_80003130
/* 000020 80003120 38600000 */  li		r3, 0
/* 000024 80003124 38800000 */  li		r4, 0
/* 000028 80003128 38A00000 */  li		r5, 0
/* 00002C 8000312C 480A88AD */  bl		OSResetSystem
lbl_80003130:
/* 000030 80003130 8001000C */  lwz		r0, 0xc(r1)
/* 000034 80003134 38210008 */  addi	r1, r1, 8
/* 000038 80003138 7C0803A6 */  mtlr	r0
/* 00003C 8000313C 4E800020 */  blr		

__set_debug_bba:
/* 000040 80003140 38000001 */  li		r0, 1
/* 000044 80003144 980D9180 */  stb		r0, Debug_BBA-_SDA_BASE_(r13)
/* 000048 80003148 4E800020 */  blr		

__get_debug_bba:
/* 00004C 8000314C 886D9180 */  lbz		r3, Debug_BBA-_SDA_BASE_(r13)
/* 000050 80003150 4E800020 */  blr		

glabel __start
/* 000054 80003154 4800015D */  bl		__init_registers
/* 000058 80003158 480002A9 */  bl		__init_hardware
/* 00005C 8000315C 3800FFFF */  li		r0, -1
/* 000060 80003160 9421FFF8 */  stwu	r1, -8(r1)
/* 000064 80003164 90010004 */  stw		r0, 4(r1)
/* 000068 80003168 90010000 */  stw		r0, 0(r1)
/* 00006C 8000316C 480001D5 */  bl		__init_data
/* 000070 80003170 38000000 */  li		r0, 0
/* 000074 80003174 3CC08000 */  lis		r6, 0x8000
/* 000078 80003178 38C60044 */  addi	r6, r6, 0x44
/* 00007C 8000317C 90060000 */  stw		r0, 0(r6)
/* 000080 80003180 3CC08000 */  lis		r6, 0x8000
/* 000084 80003184 38C600F4 */  addi	r6, r6, 0xf4
/* 000088 80003188 80C60000 */  lwz		r6, 0(r6)
/* 00008C 8000318C 28060000 */  cmplwi	r6, 0
/* 000090 80003190 4182000C */  beq		lbl_8000319C
/* 000094 80003194 80E6000C */  lwz		r7, 0xc(r6)
/* 000098 80003198 48000024 */  b		lbl_800031BC
lbl_8000319C:
/* 00009C 8000319C 3CA08000 */  lis		r5, 0x8000
/* 0000A0 800031A0 38A50034 */  addi	r5, r5, 0x34
/* 0000A4 800031A4 80A50000 */  lwz		r5, 0(r5)
/* 0000A8 800031A8 28050000 */  cmplwi	r5, 0
/* 0000AC 800031AC 4182004C */  beq		lbl_800031F8
/* 0000B0 800031B0 3CE08000 */  lis		r7, 0x8000
/* 0000B4 800031B4 38E730E8 */  addi	r7, r7, 0x30e8
/* 0000B8 800031B8 80E70000 */  lwz		r7, 0(r7)
lbl_800031BC:
/* 0000BC 800031BC 38A00000 */  li		r5, 0
/* 0000C0 800031C0 28070002 */  cmplwi	r7, 2
/* 0000C4 800031C4 41820024 */  beq		lbl_800031E8
/* 0000C8 800031C8 28070003 */  cmplwi	r7, 3
/* 0000CC 800031CC 38A00001 */  li		r5, 1
/* 0000D0 800031D0 41820018 */  beq		lbl_800031E8
/* 0000D4 800031D4 28070004 */  cmplwi	r7, 4
/* 0000D8 800031D8 40820020 */  bne		lbl_800031F8
/* 0000DC 800031DC 38A00002 */  li		r5, 2
/* 0000E0 800031E0 4BFFFF61 */  bl		__set_debug_bba
/* 0000E4 800031E4 48000014 */  b		lbl_800031F8
lbl_800031E8:
/* 0000E8 800031E8 3CC0800E */  lis		r6, InitMetroTRK@ha
/* 0000EC 800031EC 38C68FE4 */  addi	r6, r6, InitMetroTRK@l
/* 0000F0 800031F0 7CC803A6 */  mtlr	r6
/* 0000F4 800031F4 4E800021 */  blrl	
lbl_800031F8:
/* 0000F8 800031F8 3CC08000 */  lis		r6, 0x8000
/* 0000FC 800031FC 38C600F4 */  addi	r6, r6, 0xf4
/* 000100 80003200 80A60000 */  lwz		r5, 0(r6)
/* 000104 80003204 28050000 */  cmplwi	r5, 0
/* 000108 80003208 41A20050 */  beq+	lbl_80003258
/* 00010C 8000320C 80C50008 */  lwz		r6, 8(r5)
/* 000110 80003210 28060000 */  cmplwi	r6, 0
/* 000114 80003214 41A20044 */  beq+	lbl_80003258
/* 000118 80003218 7CC53214 */  add		r6, r5, r6
/* 00011C 8000321C 81C60000 */  lwz		r14, 0(r6)
/* 000120 80003220 280E0000 */  cmplwi	r14, 0
/* 000124 80003224 41820034 */  beq		lbl_80003258
/* 000128 80003228 39E60004 */  addi	r15, r6, 4
/* 00012C 8000322C 7DC903A6 */  mtctr	r14
lbl_80003230:
/* 000130 80003230 38C60004 */  addi	r6, r6, 4
/* 000134 80003234 80E60000 */  lwz		r7, 0(r6)
/* 000138 80003238 7CE72A14 */  add		r7, r7, r5
/* 00013C 8000323C 90E60000 */  stw		r7, 0(r6)
/* 000140 80003240 4200FFF0 */  bdnz	lbl_80003230
/* 000144 80003244 3CA08000 */  lis		r5, 0x8000
/* 000148 80003248 38A50034 */  addi	r5, r5, 0x34
/* 00014C 8000324C 55E70034 */  rlwinm	r7, r15, 0, 0, 0x1a
/* 000150 80003250 90E50000 */  stw		r7, 0(r5)
/* 000154 80003254 4800000C */  b		lbl_80003260
lbl_80003258:
/* 000158 80003258 39C00000 */  li		r14, 0
/* 00015C 8000325C 39E00000 */  li		r15, 0
lbl_80003260:
/* 000160 80003260 480B04F5 */  bl		DBInit
/* 000164 80003264 480A4695 */  bl		OSInit
/* 000168 80003268 3C808000 */  lis		r4, 0x8000
/* 00016C 8000326C 388430E6 */  addi	r4, r4, 0x30e6
/* 000170 80003270 A0640000 */  lhz		r3, 0(r4)
/* 000174 80003274 70658000 */  andi.	r5, r3, 0x8000
/* 000178 80003278 41820010 */  beq		lbl_80003288
/* 00017C 8000327C 70637FFF */  andi.	r3, r3, 0x7fff
/* 000180 80003280 28030001 */  cmplwi	r3, 1
/* 000184 80003284 40820008 */  bne		lbl_8000328C
lbl_80003288:
/* 000188 80003288 4BFFFE79 */  bl		__check_pad3
lbl_8000328C:
/* 00018C 8000328C 4BFFFEC1 */  bl		__get_debug_bba
/* 000190 80003290 28030001 */  cmplwi	r3, 1
/* 000194 80003294 40820008 */  bne		lbl_8000329C
/* 000198 80003298 480AAEA9 */  bl		InitMetroTRK_BBA
lbl_8000329C:
/* 00019C 8000329C 480AAEA9 */  bl		__init_user
/* 0001A0 800032A0 7DC37378 */  mr		r3, r14
/* 0001A4 800032A4 7DE47B78 */  mr		r4, r15
/* 0001A8 800032A8 480023CD */  bl		main
/* 0001AC 800032AC 480D6EC4 */  b		exit

__init_registers:
/* 0001B0 800032B0 38000000 */  li		r0, 0
/* 0001B4 800032B4 38600000 */  li		r3, 0
/* 0001B8 800032B8 38800000 */  li		r4, 0
/* 0001BC 800032BC 38A00000 */  li		r5, 0
/* 0001C0 800032C0 38C00000 */  li		r6, 0
/* 0001C4 800032C4 38E00000 */  li		r7, 0
/* 0001C8 800032C8 39000000 */  li		r8, 0
/* 0001CC 800032CC 39200000 */  li		r9, 0
/* 0001D0 800032D0 39400000 */  li		r10, 0
/* 0001D4 800032D4 39600000 */  li		r11, 0
/* 0001D8 800032D8 39800000 */  li		r12, 0
/* 0001DC 800032DC 39C00000 */  li		r14, 0
/* 0001E0 800032E0 39E00000 */  li		r15, 0
/* 0001E4 800032E4 3A000000 */  li		r16, 0
/* 0001E8 800032E8 3A200000 */  li		r17, 0
/* 0001EC 800032EC 3A400000 */  li		r18, 0
/* 0001F0 800032F0 3A600000 */  li		r19, 0
/* 0001F4 800032F4 3A800000 */  li		r20, 0
/* 0001F8 800032F8 3AA00000 */  li		r21, 0
/* 0001FC 800032FC 3AC00000 */  li		r22, 0
/* 000200 80003300 3AE00000 */  li		r23, 0
/* 000204 80003304 3B000000 */  li		r24, 0
/* 000208 80003308 3B200000 */  li		r25, 0
/* 00020C 8000330C 3B400000 */  li		r26, 0
/* 000210 80003310 3B600000 */  li		r27, 0
/* 000214 80003314 3B800000 */  li		r28, 0
/* 000218 80003318 3BA00000 */  li		r29, 0
/* 00021C 8000331C 3BC00000 */  li		r30, 0
/* 000220 80003320 3BE00000 */  li		r31, 0
/* 000224 80003324 3C208015 */  lis		r1, _stack_addr@h
/* 000228 80003328 602167B0 */  ori		r1, r1, _stack_addr@l
/* 00022C 8000332C 3C408014 */  lis		r2, _SDA2_BASE_@h
/* 000230 80003330 6042DFE0 */  ori		r2, r2, _SDA2_BASE_@l
/* 000234 80003334 3DA08014 */  lis		r13, _SDA_BASE_@h
/* 000238 80003338 61ADC9E0 */  ori		r13, r13, _SDA_BASE_@l
/* 00023C 8000333C 4E800020 */  blr		

__init_data:
/* 000240 80003340 7C0802A6 */  mflr	r0
/* 000244 80003344 90010004 */  stw		r0, 4(r1)
/* 000248 80003348 9421FFE8 */  stwu	r1, -0x18(r1)
/* 00024C 8000334C 93E10014 */  stw		r31, 0x14(r1)
/* 000250 80003350 93C10010 */  stw		r30, 0x10(r1)
/* 000254 80003354 93A1000C */  stw		r29, 0xc(r1)
/* 000258 80003358 3C608000 */  lis		r3, _rom_copy_info@ha
/* 00025C 8000335C 38035514 */  addi	r0, r3, _rom_copy_info@l
/* 000260 80003360 7C1D0378 */  mr		r29, r0
/* 000264 80003364 48000004 */  b		lbl_80003368
lbl_80003368:
/* 000268 80003368 48000004 */  b		lbl_8000336C
lbl_8000336C:
/* 00026C 8000336C 83DD0008 */  lwz		r30, 8(r29)
/* 000270 80003370 281E0000 */  cmplwi	r30, 0
/* 000274 80003374 41820038 */  beq		lbl_800033AC
/* 000278 80003378 809D0000 */  lwz		r4, 0(r29)
/* 00027C 8000337C 83FD0004 */  lwz		r31, 4(r29)
/* 000280 80003380 41820024 */  beq		lbl_800033A4
/* 000284 80003384 7C1F2040 */  cmplw	r31, r4
/* 000288 80003388 4182001C */  beq		lbl_800033A4
/* 00028C 8000338C 7FE3FB78 */  mr		r3, r31
/* 000290 80003390 7FC5F378 */  mr		r5, r30
/* 000294 80003394 48002131 */  bl		memcpy
/* 000298 80003398 7FE3FB78 */  mr		r3, r31
/* 00029C 8000339C 7FC4F378 */  mr		r4, r30
/* 0002A0 800033A0 48000085 */  bl		__flush_cache
lbl_800033A4:
/* 0002A4 800033A4 3BBD000C */  addi	r29, r29, 0xc
/* 0002A8 800033A8 4BFFFFC4 */  b		lbl_8000336C
lbl_800033AC:
/* 0002AC 800033AC 3C608000 */  lis		r3, _bss_init_info@ha
/* 0002B0 800033B0 38035580 */  addi	r0, r3, _bss_init_info@l
/* 0002B4 800033B4 7C1D0378 */  mr		r29, r0
/* 0002B8 800033B8 48000004 */  b		lbl_800033BC
lbl_800033BC:
/* 0002BC 800033BC 48000004 */  b		lbl_800033C0
lbl_800033C0:
/* 0002C0 800033C0 80BD0004 */  lwz		r5, 4(r29)
/* 0002C4 800033C4 28050000 */  cmplwi	r5, 0
/* 0002C8 800033C8 4182001C */  beq		lbl_800033E4
/* 0002CC 800033CC 807D0000 */  lwz		r3, 0(r29)
/* 0002D0 800033D0 4182000C */  beq		lbl_800033DC
/* 0002D4 800033D4 38800000 */  li		r4, 0
/* 0002D8 800033D8 48001FF9 */  bl		memset
lbl_800033DC:
/* 0002DC 800033DC 3BBD0008 */  addi	r29, r29, 8
/* 0002E0 800033E0 4BFFFFE0 */  b		lbl_800033C0
lbl_800033E4:
/* 0002E4 800033E4 8001001C */  lwz		r0, 0x1c(r1)
/* 0002E8 800033E8 83E10014 */  lwz		r31, 0x14(r1)
/* 0002EC 800033EC 83C10010 */  lwz		r30, 0x10(r1)
/* 0002F0 800033F0 83A1000C */  lwz		r29, 0xc(r1)
/* 0002F4 800033F4 38210018 */  addi	r1, r1, 0x18
/* 0002F8 800033F8 7C0803A6 */  mtlr	r0
/* 0002FC 800033FC 4E800020 */  blr		


.section .sbss, "wa"

.balign 8

/* 001003C0 80145B60 0001 */
Debug_BBA:
    .skip 1


