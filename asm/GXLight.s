# GXLight.c
.include "macros.inc"

.section .text, "ax"

.balign 4

glabel GXSetChanAmbColor
/* 0B28F4 800B7E94 2C030003 */  cmpwi	r3, 3
/* 0B28F8 800B7E98 41820084 */  beq		lbl_800B7F1C
/* 0B28FC 800B7E9C 4080001C */  bge		lbl_800B7EB8
/* 0B2900 800B7EA0 2C030001 */  cmpwi	r3, 1
/* 0B2904 800B7EA4 41820040 */  beq		lbl_800B7EE4
/* 0B2908 800B7EA8 40800058 */  bge		lbl_800B7F00
/* 0B290C 800B7EAC 2C030000 */  cmpwi	r3, 0
/* 0B2910 800B7EB0 40800018 */  bge		lbl_800B7EC8
/* 0B2914 800B7EB4 4E800020 */  blr		
lbl_800B7EB8:
/* 0B2918 800B7EB8 2C030005 */  cmpwi	r3, 5
/* 0B291C 800B7EBC 41820084 */  beq		lbl_800B7F40
/* 0B2920 800B7EC0 4C800020 */  bgelr	
/* 0B2924 800B7EC4 48000070 */  b		lbl_800B7F34
lbl_800B7EC8:
/* 0B2928 800B7EC8 806284B0 */  lwz		r3, __GXData-_SDA2_BASE_(r2)
/* 0B292C 800B7ECC 38A00000 */  li		r5, 0
/* 0B2930 800B7ED0 80040000 */  lwz		r0, 0(r4)
/* 0B2934 800B7ED4 806300A8 */  lwz		r3, 0xa8(r3)
/* 0B2938 800B7ED8 5407002E */  rlwinm	r7, r0, 0, 0, 0x17
/* 0B293C 800B7EDC 5067063E */  rlwimi	r7, r3, 0, 0x18, 0x1f
/* 0B2940 800B7EE0 48000070 */  b		lbl_800B7F50
lbl_800B7EE4:
/* 0B2944 800B7EE4 806284B0 */  lwz		r3, __GXData-_SDA2_BASE_(r2)
/* 0B2948 800B7EE8 38A00001 */  li		r5, 1
/* 0B294C 800B7EEC 80040000 */  lwz		r0, 0(r4)
/* 0B2950 800B7EF0 806300AC */  lwz		r3, 0xac(r3)
/* 0B2954 800B7EF4 5407002E */  rlwinm	r7, r0, 0, 0, 0x17
/* 0B2958 800B7EF8 5067063E */  rlwimi	r7, r3, 0, 0x18, 0x1f
/* 0B295C 800B7EFC 48000054 */  b		lbl_800B7F50
lbl_800B7F00:
/* 0B2960 800B7F00 806284B0 */  lwz		r3, __GXData-_SDA2_BASE_(r2)
/* 0B2964 800B7F04 38A00000 */  li		r5, 0
/* 0B2968 800B7F08 88040003 */  lbz		r0, 3(r4)
/* 0B296C 800B7F0C 806300A8 */  lwz		r3, 0xa8(r3)
/* 0B2970 800B7F10 5003063E */  rlwimi	r3, r0, 0, 0x18, 0x1f
/* 0B2974 800B7F14 38E30000 */  addi	r7, r3, 0
/* 0B2978 800B7F18 48000038 */  b		lbl_800B7F50
lbl_800B7F1C:
/* 0B297C 800B7F1C 806284B0 */  lwz		r3, __GXData-_SDA2_BASE_(r2)
/* 0B2980 800B7F20 38A00001 */  li		r5, 1
/* 0B2984 800B7F24 88040003 */  lbz		r0, 3(r4)
/* 0B2988 800B7F28 80E300AC */  lwz		r7, 0xac(r3)
/* 0B298C 800B7F2C 5007063E */  rlwimi	r7, r0, 0, 0x18, 0x1f
/* 0B2990 800B7F30 48000020 */  b		lbl_800B7F50
lbl_800B7F34:
/* 0B2994 800B7F34 80E40000 */  lwz		r7, 0(r4)
/* 0B2998 800B7F38 38A00000 */  li		r5, 0
/* 0B299C 800B7F3C 48000014 */  b		lbl_800B7F50
lbl_800B7F40:
/* 0B29A0 800B7F40 80E40000 */  lwz		r7, 0(r4)
/* 0B29A4 800B7F44 38A00001 */  li		r5, 1
/* 0B29A8 800B7F48 48000008 */  b		lbl_800B7F50
/* 0B29AC 800B7F4C 4E800020 */  blr		
lbl_800B7F50:
/* 0B29B0 800B7F50 38000010 */  li		r0, 0x10
/* 0B29B4 800B7F54 808284B0 */  lwz		r4, __GXData-_SDA2_BASE_(r2)
/* 0B29B8 800B7F58 3CC0CC01 */  lis		r6, 0xcc01
/* 0B29BC 800B7F5C 98068000 */  stb		r0, -0x8000(r6)
/* 0B29C0 800B7F60 3865100A */  addi	r3, r5, 0x100a
/* 0B29C4 800B7F64 54A0103A */  slwi	r0, r5, 2
/* 0B29C8 800B7F68 90668000 */  stw		r3, -0x8000(r6)
/* 0B29CC 800B7F6C 38A00001 */  li		r5, 1
/* 0B29D0 800B7F70 7C640214 */  add		r3, r4, r0
/* 0B29D4 800B7F74 90E68000 */  stw		r7, -0x8000(r6)
/* 0B29D8 800B7F78 B0A40002 */  sth		r5, 2(r4)
/* 0B29DC 800B7F7C 90E300A8 */  stw		r7, 0xa8(r3)
/* 0B29E0 800B7F80 4E800020 */  blr		

glabel GXSetChanMatColor
/* 0B29E4 800B7F84 2C030003 */  cmpwi	r3, 3
/* 0B29E8 800B7F88 41820084 */  beq		lbl_800B800C
/* 0B29EC 800B7F8C 4080001C */  bge		lbl_800B7FA8
/* 0B29F0 800B7F90 2C030001 */  cmpwi	r3, 1
/* 0B29F4 800B7F94 41820040 */  beq		lbl_800B7FD4
/* 0B29F8 800B7F98 40800058 */  bge		lbl_800B7FF0
/* 0B29FC 800B7F9C 2C030000 */  cmpwi	r3, 0
/* 0B2A00 800B7FA0 40800018 */  bge		lbl_800B7FB8
/* 0B2A04 800B7FA4 4E800020 */  blr		
lbl_800B7FA8:
/* 0B2A08 800B7FA8 2C030005 */  cmpwi	r3, 5
/* 0B2A0C 800B7FAC 41820084 */  beq		lbl_800B8030
/* 0B2A10 800B7FB0 4C800020 */  bgelr	
/* 0B2A14 800B7FB4 48000070 */  b		lbl_800B8024
lbl_800B7FB8:
/* 0B2A18 800B7FB8 806284B0 */  lwz		r3, __GXData-_SDA2_BASE_(r2)
/* 0B2A1C 800B7FBC 38A00000 */  li		r5, 0
/* 0B2A20 800B7FC0 80040000 */  lwz		r0, 0(r4)
/* 0B2A24 800B7FC4 806300B0 */  lwz		r3, 0xb0(r3)
/* 0B2A28 800B7FC8 5407002E */  rlwinm	r7, r0, 0, 0, 0x17
/* 0B2A2C 800B7FCC 5067063E */  rlwimi	r7, r3, 0, 0x18, 0x1f
/* 0B2A30 800B7FD0 48000070 */  b		lbl_800B8040
lbl_800B7FD4:
/* 0B2A34 800B7FD4 806284B0 */  lwz		r3, __GXData-_SDA2_BASE_(r2)
/* 0B2A38 800B7FD8 38A00001 */  li		r5, 1
/* 0B2A3C 800B7FDC 80040000 */  lwz		r0, 0(r4)
/* 0B2A40 800B7FE0 806300B4 */  lwz		r3, 0xb4(r3)
/* 0B2A44 800B7FE4 5407002E */  rlwinm	r7, r0, 0, 0, 0x17
/* 0B2A48 800B7FE8 5067063E */  rlwimi	r7, r3, 0, 0x18, 0x1f
/* 0B2A4C 800B7FEC 48000054 */  b		lbl_800B8040
lbl_800B7FF0:
/* 0B2A50 800B7FF0 806284B0 */  lwz		r3, __GXData-_SDA2_BASE_(r2)
/* 0B2A54 800B7FF4 38A00000 */  li		r5, 0
/* 0B2A58 800B7FF8 88040003 */  lbz		r0, 3(r4)
/* 0B2A5C 800B7FFC 806300B0 */  lwz		r3, 0xb0(r3)
/* 0B2A60 800B8000 5003063E */  rlwimi	r3, r0, 0, 0x18, 0x1f
/* 0B2A64 800B8004 38E30000 */  addi	r7, r3, 0
/* 0B2A68 800B8008 48000038 */  b		lbl_800B8040
lbl_800B800C:
/* 0B2A6C 800B800C 806284B0 */  lwz		r3, __GXData-_SDA2_BASE_(r2)
/* 0B2A70 800B8010 38A00001 */  li		r5, 1
/* 0B2A74 800B8014 88040003 */  lbz		r0, 3(r4)
/* 0B2A78 800B8018 80E300B4 */  lwz		r7, 0xb4(r3)
/* 0B2A7C 800B801C 5007063E */  rlwimi	r7, r0, 0, 0x18, 0x1f
/* 0B2A80 800B8020 48000020 */  b		lbl_800B8040
lbl_800B8024:
/* 0B2A84 800B8024 80E40000 */  lwz		r7, 0(r4)
/* 0B2A88 800B8028 38A00000 */  li		r5, 0
/* 0B2A8C 800B802C 48000014 */  b		lbl_800B8040
lbl_800B8030:
/* 0B2A90 800B8030 80E40000 */  lwz		r7, 0(r4)
/* 0B2A94 800B8034 38A00001 */  li		r5, 1
/* 0B2A98 800B8038 48000008 */  b		lbl_800B8040
/* 0B2A9C 800B803C 4E800020 */  blr		
lbl_800B8040:
/* 0B2AA0 800B8040 38000010 */  li		r0, 0x10
/* 0B2AA4 800B8044 808284B0 */  lwz		r4, __GXData-_SDA2_BASE_(r2)
/* 0B2AA8 800B8048 3CC0CC01 */  lis		r6, 0xcc01
/* 0B2AAC 800B804C 98068000 */  stb		r0, -0x8000(r6)
/* 0B2AB0 800B8050 3865100C */  addi	r3, r5, 0x100c
/* 0B2AB4 800B8054 54A0103A */  slwi	r0, r5, 2
/* 0B2AB8 800B8058 90668000 */  stw		r3, -0x8000(r6)
/* 0B2ABC 800B805C 38A00001 */  li		r5, 1
/* 0B2AC0 800B8060 7C640214 */  add		r3, r4, r0
/* 0B2AC4 800B8064 90E68000 */  stw		r7, -0x8000(r6)
/* 0B2AC8 800B8068 B0A40002 */  sth		r5, 2(r4)
/* 0B2ACC 800B806C 90E300B0 */  stw		r7, 0xb0(r3)
/* 0B2AD0 800B8070 4E800020 */  blr		

glabel GXSetNumChans
/* 0B2AD4 800B8074 80C284B0 */  lwz		r6, __GXData-_SDA2_BASE_(r2)
/* 0B2AD8 800B8078 5465063E */  clrlwi	r5, r3, 0x18
/* 0B2ADC 800B807C 38800010 */  li		r4, 0x10
/* 0B2AE0 800B8080 80060204 */  lwz		r0, 0x204(r6)
/* 0B2AE4 800B8084 50602676 */  rlwimi	r0, r3, 4, 0x19, 0x1b
/* 0B2AE8 800B8088 3C60CC01 */  lis		r3, 0xcc01
/* 0B2AEC 800B808C 90060204 */  stw		r0, 0x204(r6)
/* 0B2AF0 800B8090 38001009 */  li		r0, 0x1009
/* 0B2AF4 800B8094 98838000 */  stb		r4, -0x8000(r3)
/* 0B2AF8 800B8098 90038000 */  stw		r0, -0x8000(r3)
/* 0B2AFC 800B809C 90A38000 */  stw		r5, -0x8000(r3)
/* 0B2B00 800B80A0 800605AC */  lwz		r0, 0x5ac(r6)
/* 0B2B04 800B80A4 60000004 */  ori		r0, r0, 4
/* 0B2B08 800B80A8 900605AC */  stw		r0, 0x5ac(r6)
/* 0B2B0C 800B80AC 4E800020 */  blr		

glabel GXSetChanCtrl
/* 0B2B10 800B80B0 5480063E */  clrlwi	r0, r4, 0x18
/* 0B2B14 800B80B4 38800000 */  li		r4, 0
/* 0B2B18 800B80B8 50040FBC */  rlwimi	r4, r0, 1, 0x1e, 0x1e
/* 0B2B1C 800B80BC 39440000 */  addi	r10, r4, 0
/* 0B2B20 800B80C0 50CA07FE */  rlwimi	r10, r6, 0, 0x1f, 0x1f
/* 0B2B24 800B80C4 2C090000 */  cmpwi	r9, 0
/* 0B2B28 800B80C8 50AA3672 */  rlwimi	r10, r5, 6, 0x19, 0x19
/* 0B2B2C 800B80CC 546607BE */  clrlwi	r6, r3, 0x1e
/* 0B2B30 800B80D0 40820008 */  bne		lbl_800B80D8
/* 0B2B34 800B80D4 39000000 */  li		r8, 0
lbl_800B80D8:
/* 0B2B38 800B80D8 20890002 */  subfic	r4, r9, 2
/* 0B2B3C 800B80DC 3004FFFF */  addic	r0, r4, -1
/* 0B2B40 800B80E0 7CA02110 */  subfe	r5, r0, r4
/* 0B2B44 800B80E4 7C8900D0 */  neg		r4, r9
/* 0B2B48 800B80E8 3004FFFF */  addic	r0, r4, -1
/* 0B2B4C 800B80EC 510A3DF0 */  rlwimi	r10, r8, 7, 0x17, 0x18
/* 0B2B50 800B80F0 50AA4DAC */  rlwimi	r10, r5, 9, 0x16, 0x16
/* 0B2B54 800B80F4 7C002110 */  subfe	r0, r0, r4
/* 0B2B58 800B80F8 500A556A */  rlwimi	r10, r0, 0xa, 0x15, 0x15
/* 0B2B5C 800B80FC 3806100E */  addi	r0, r6, 0x100e
/* 0B2B60 800B8100 554607B2 */  rlwinm	r6, r10, 0, 0x1e, 0x19
/* 0B2B64 800B8104 50E616BA */  rlwimi	r6, r7, 2, 0x1a, 0x1d
/* 0B2B68 800B8108 54C60560 */  rlwinm	r6, r6, 0, 0x15, 0x10
/* 0B2B6C 800B810C 38A00010 */  li		r5, 0x10
/* 0B2B70 800B8110 3C80CC01 */  lis		r4, 0xcc01
/* 0B2B74 800B8114 98A48000 */  stb		r5, -0x8000(r4)
/* 0B2B78 800B8118 50E63C68 */  rlwimi	r6, r7, 7, 0x11, 0x14
/* 0B2B7C 800B811C 2C030004 */  cmpwi	r3, 4
/* 0B2B80 800B8120 90048000 */  stw		r0, -0x8000(r4)
/* 0B2B84 800B8124 90C48000 */  stw		r6, -0x8000(r4)
/* 0B2B88 800B8128 40820018 */  bne		lbl_800B8140
/* 0B2B8C 800B812C 98A48000 */  stb		r5, -0x8000(r4)
/* 0B2B90 800B8130 38001010 */  li		r0, 0x1010
/* 0B2B94 800B8134 90048000 */  stw		r0, -0x8000(r4)
/* 0B2B98 800B8138 90C48000 */  stw		r6, -0x8000(r4)
/* 0B2B9C 800B813C 4800001C */  b		lbl_800B8158
lbl_800B8140:
/* 0B2BA0 800B8140 2C030005 */  cmpwi	r3, 5
/* 0B2BA4 800B8144 40820014 */  bne		lbl_800B8158
/* 0B2BA8 800B8148 98A48000 */  stb		r5, -0x8000(r4)
/* 0B2BAC 800B814C 38001011 */  li		r0, 0x1011
/* 0B2BB0 800B8150 90048000 */  stw		r0, -0x8000(r4)
/* 0B2BB4 800B8154 90C48000 */  stw		r6, -0x8000(r4)
lbl_800B8158:
/* 0B2BB8 800B8158 806284B0 */  lwz		r3, __GXData-_SDA2_BASE_(r2)
/* 0B2BBC 800B815C 38000001 */  li		r0, 1
/* 0B2BC0 800B8160 B0030002 */  sth		r0, 2(r3)
/* 0B2BC4 800B8164 4E800020 */  blr		


