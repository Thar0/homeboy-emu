# CARDMount.c
.include "macros.inc"

.section .text, "ax"

.balign 4

IsCard:
/* 0C56F4 800CAC94 5460001F */  rlwinm. r0, r3, 0, 0, 0xf
/* 0C56F8 800CAC98 41820024 */  beq     lbl_800CACBC
/* 0C56FC 800CAC9C 3C038000 */  addis   r0, r3, 0x8000
/* 0C5700 800CACA0 28000004 */  cmplwi  r0, 4
/* 0C5704 800CACA4 40820010 */  bne     lbl_800CACB4
/* 0C5708 800CACA8 A00D8E38 */  lhz     r0, __CARDVendorID-_SDA_BASE_(r13)
/* 0C570C 800CACAC 2800FFFF */  cmplwi  r0, 0xffff
/* 0C5710 800CACB0 4082000C */  bne     lbl_800CACBC
lbl_800CACB4:
/* 0C5714 800CACB4 38600000 */  li      r3, 0
/* 0C5718 800CACB8 4E800020 */  blr     
lbl_800CACBC:
/* 0C571C 800CACBC 546007BF */  clrlwi. r0, r3, 0x1e
/* 0C5720 800CACC0 4182000C */  beq     lbl_800CACCC
/* 0C5724 800CACC4 38600000 */  li      r3, 0
/* 0C5728 800CACC8 4E800020 */  blr     
lbl_800CACCC:
/* 0C572C 800CACCC 5465063A */  rlwinm  r5, r3, 0, 0x18, 0x1d
/* 0C5730 800CACD0 2C050020 */  cmpwi   r5, 0x20
/* 0C5734 800CACD4 41820048 */  beq     lbl_800CAD1C
/* 0C5738 800CACD8 40800028 */  bge     lbl_800CAD00
/* 0C573C 800CACDC 2C050008 */  cmpwi   r5, 8
/* 0C5740 800CACE0 4182003C */  beq     lbl_800CAD1C
/* 0C5744 800CACE4 40800010 */  bge     lbl_800CACF4
/* 0C5748 800CACE8 2C050004 */  cmpwi   r5, 4
/* 0C574C 800CACEC 41820030 */  beq     lbl_800CAD1C
/* 0C5750 800CACF0 48000024 */  b       lbl_800CAD14
lbl_800CACF4:
/* 0C5754 800CACF4 2C050010 */  cmpwi   r5, 0x10
/* 0C5758 800CACF8 41820024 */  beq     lbl_800CAD1C
/* 0C575C 800CACFC 48000018 */  b       lbl_800CAD14
lbl_800CAD00:
/* 0C5760 800CAD00 2C050080 */  cmpwi   r5, 0x80
/* 0C5764 800CAD04 41820018 */  beq     lbl_800CAD1C
/* 0C5768 800CAD08 4080000C */  bge     lbl_800CAD14
/* 0C576C 800CAD0C 2C050040 */  cmpwi   r5, 0x40
/* 0C5770 800CAD10 4182000C */  beq     lbl_800CAD1C
lbl_800CAD14:
/* 0C5774 800CAD14 38600000 */  li      r3, 0
/* 0C5778 800CAD18 4E800020 */  blr     
lbl_800CAD1C:
/* 0C577C 800CAD1C 3C808010 */  lis     r4, SectorSizeTable@ha
/* 0C5780 800CAD20 5463BEFA */  rlwinm  r3, r3, 0x17, 0x1b, 0x1d
/* 0C5784 800CAD24 38041C80 */  addi    r0, r4, SectorSizeTable@l
/* 0C5788 800CAD28 7C601A14 */  add     r3, r0, r3
/* 0C578C 800CAD2C 80630000 */  lwz     r3, 0(r3)
/* 0C5790 800CAD30 2C030000 */  cmpwi   r3, 0
/* 0C5794 800CAD34 4082000C */  bne     lbl_800CAD40
/* 0C5798 800CAD38 38600000 */  li      r3, 0
/* 0C579C 800CAD3C 4E800020 */  blr     
lbl_800CAD40:
/* 0C57A0 800CAD40 54A088DC */  rlwinm  r0, r5, 0x11, 3, 0xe
/* 0C57A4 800CAD44 7C001B96 */  divwu   r0, r0, r3
/* 0C57A8 800CAD48 28000008 */  cmplwi  r0, 8
/* 0C57AC 800CAD4C 4080000C */  bge     lbl_800CAD58
/* 0C57B0 800CAD50 38600000 */  li      r3, 0
/* 0C57B4 800CAD54 4E800020 */  blr     
lbl_800CAD58:
/* 0C57B8 800CAD58 38600001 */  li      r3, 1
/* 0C57BC 800CAD5C 4E800020 */  blr     

glabel CARDProbeEx
/* 0C57C0 800CAD60 7C0802A6 */  mflr    r0
/* 0C57C4 800CAD64 90010004 */  stw     r0, 4(r1)
/* 0C57C8 800CAD68 9421FFD0 */  stwu    r1, -0x30(r1)
/* 0C57CC 800CAD6C BF61001C */  stmw    r27, 0x1c(r1)
/* 0C57D0 800CAD70 7C7B1B79 */  or.     r27, r3, r3
/* 0C57D4 800CAD74 3B840000 */  addi    r28, r4, 0
/* 0C57D8 800CAD78 3BE50000 */  addi    r31, r5, 0
/* 0C57DC 800CAD7C 4180000C */  blt     lbl_800CAD88
/* 0C57E0 800CAD80 2C1B0002 */  cmpwi   r27, 2
/* 0C57E4 800CAD84 4180000C */  blt     lbl_800CAD90
lbl_800CAD88:
/* 0C57E8 800CAD88 3860FF80 */  li      r3, -128
/* 0C57EC 800CAD8C 4800013C */  b       lbl_800CAEC8
lbl_800CAD90:
/* 0C57F0 800CAD90 3C608000 */  lis     r3, 0x8000
/* 0C57F4 800CAD94 880330E3 */  lbz     r0, 0x30e3(r3)
/* 0C57F8 800CAD98 54000631 */  rlwinm. r0, r0, 0, 0x18, 0x18
/* 0C57FC 800CAD9C 4182000C */  beq     lbl_800CADA8
/* 0C5800 800CADA0 3860FFFD */  li      r3, -3
/* 0C5804 800CADA4 48000124 */  b       lbl_800CAEC8
lbl_800CADA8:
/* 0C5808 800CADA8 1C9B0110 */  mulli   r4, r27, 0x110
/* 0C580C 800CADAC 3C608014 */  lis     r3, __CARDBlock@ha
/* 0C5810 800CADB0 380324D0 */  addi    r0, r3, __CARDBlock@l
/* 0C5814 800CADB4 7FC02214 */  add     r30, r0, r4
/* 0C5818 800CADB8 4BFDF9B9 */  bl      OSDisableInterrupts
/* 0C581C 800CADBC 3BA30000 */  addi    r29, r3, 0
/* 0C5820 800CADC0 387B0000 */  addi    r3, r27, 0
/* 0C5824 800CADC4 4BFE3DF5 */  bl      EXIProbeEx
/* 0C5828 800CADC8 2C03FFFF */  cmpwi   r3, -1
/* 0C582C 800CADCC 4082000C */  bne     lbl_800CADD8
/* 0C5830 800CADD0 3BC0FFFD */  li      r30, -3
/* 0C5834 800CADD4 480000E8 */  b       lbl_800CAEBC
lbl_800CADD8:
/* 0C5838 800CADD8 2C030000 */  cmpwi   r3, 0
/* 0C583C 800CADDC 4082000C */  bne     lbl_800CADE8
/* 0C5840 800CADE0 3BC0FFFF */  li      r30, -1
/* 0C5844 800CADE4 480000D8 */  b       lbl_800CAEBC
lbl_800CADE8:
/* 0C5848 800CADE8 801E0000 */  lwz     r0, 0(r30)
/* 0C584C 800CADEC 2C000000 */  cmpwi   r0, 0
/* 0C5850 800CADF0 41820040 */  beq     lbl_800CAE30
/* 0C5854 800CADF4 801E0024 */  lwz     r0, 0x24(r30)
/* 0C5858 800CADF8 2C000001 */  cmpwi   r0, 1
/* 0C585C 800CADFC 4080000C */  bge     lbl_800CAE08
/* 0C5860 800CAE00 3BC0FFFF */  li      r30, -1
/* 0C5864 800CAE04 480000B8 */  b       lbl_800CAEBC
lbl_800CAE08:
/* 0C5868 800CAE08 281C0000 */  cmplwi  r28, 0
/* 0C586C 800CAE0C 4182000C */  beq     lbl_800CAE18
/* 0C5870 800CAE10 A01E0008 */  lhz     r0, 8(r30)
/* 0C5874 800CAE14 901C0000 */  stw     r0, 0(r28)
lbl_800CAE18:
/* 0C5878 800CAE18 281F0000 */  cmplwi  r31, 0
/* 0C587C 800CAE1C 4182000C */  beq     lbl_800CAE28
/* 0C5880 800CAE20 801E000C */  lwz     r0, 0xc(r30)
/* 0C5884 800CAE24 901F0000 */  stw     r0, 0(r31)
lbl_800CAE28:
/* 0C5888 800CAE28 3BC00000 */  li      r30, 0
/* 0C588C 800CAE2C 48000090 */  b       lbl_800CAEBC
lbl_800CAE30:
/* 0C5890 800CAE30 7F63DB78 */  mr      r3, r27
/* 0C5894 800CAE34 4BFE4991 */  bl      EXIGetState
/* 0C5898 800CAE38 54600739 */  rlwinm. r0, r3, 0, 0x1c, 0x1c
/* 0C589C 800CAE3C 4182000C */  beq     lbl_800CAE48
/* 0C58A0 800CAE40 3BC0FFFE */  li      r30, -2
/* 0C58A4 800CAE44 48000078 */  b       lbl_800CAEBC
lbl_800CAE48:
/* 0C58A8 800CAE48 387B0000 */  addi    r3, r27, 0
/* 0C58AC 800CAE4C 38A10014 */  addi    r5, r1, 0x14
/* 0C58B0 800CAE50 38800000 */  li      r4, 0
/* 0C58B4 800CAE54 4BFE49B1 */  bl      EXIGetID
/* 0C58B8 800CAE58 2C030000 */  cmpwi   r3, 0
/* 0C58BC 800CAE5C 4082000C */  bne     lbl_800CAE68
/* 0C58C0 800CAE60 3BC0FFFF */  li      r30, -1
/* 0C58C4 800CAE64 48000058 */  b       lbl_800CAEBC
lbl_800CAE68:
/* 0C58C8 800CAE68 80610014 */  lwz     r3, 0x14(r1)
/* 0C58CC 800CAE6C 4BFFFE29 */  bl      IsCard
/* 0C58D0 800CAE70 2C030000 */  cmpwi   r3, 0
/* 0C58D4 800CAE74 41820044 */  beq     lbl_800CAEB8
/* 0C58D8 800CAE78 281C0000 */  cmplwi  r28, 0
/* 0C58DC 800CAE7C 41820010 */  beq     lbl_800CAE8C
/* 0C58E0 800CAE80 80010014 */  lwz     r0, 0x14(r1)
/* 0C58E4 800CAE84 5400063A */  rlwinm  r0, r0, 0, 0x18, 0x1d
/* 0C58E8 800CAE88 901C0000 */  stw     r0, 0(r28)
lbl_800CAE8C:
/* 0C58EC 800CAE8C 281F0000 */  cmplwi  r31, 0
/* 0C58F0 800CAE90 41820020 */  beq     lbl_800CAEB0
/* 0C58F4 800CAE94 80810014 */  lwz     r4, 0x14(r1)
/* 0C58F8 800CAE98 3C608010 */  lis     r3, SectorSizeTable@ha
/* 0C58FC 800CAE9C 38031C80 */  addi    r0, r3, SectorSizeTable@l
/* 0C5900 800CAEA0 5483BEFA */  rlwinm  r3, r4, 0x17, 0x1b, 0x1d
/* 0C5904 800CAEA4 7C601A14 */  add     r3, r0, r3
/* 0C5908 800CAEA8 80030000 */  lwz     r0, 0(r3)
/* 0C590C 800CAEAC 901F0000 */  stw     r0, 0(r31)
lbl_800CAEB0:
/* 0C5910 800CAEB0 3BC00000 */  li      r30, 0
/* 0C5914 800CAEB4 48000008 */  b       lbl_800CAEBC
lbl_800CAEB8:
/* 0C5918 800CAEB8 3BC0FFFE */  li      r30, -2
lbl_800CAEBC:
/* 0C591C 800CAEBC 7FA3EB78 */  mr      r3, r29
/* 0C5920 800CAEC0 4BFDF8D9 */  bl      OSRestoreInterrupts
/* 0C5924 800CAEC4 7FC3F378 */  mr      r3, r30
lbl_800CAEC8:
/* 0C5928 800CAEC8 BB61001C */  lmw     r27, 0x1c(r1)
/* 0C592C 800CAECC 80010034 */  lwz     r0, 0x34(r1)
/* 0C5930 800CAED0 38210030 */  addi    r1, r1, 0x30
/* 0C5934 800CAED4 7C0803A6 */  mtlr    r0
/* 0C5938 800CAED8 4E800020 */  blr     

DoMount:
/* 0C593C 800CAEDC 7C0802A6 */  mflr    r0
/* 0C5940 800CAEE0 90010004 */  stw     r0, 4(r1)
/* 0C5944 800CAEE4 9421FFD0 */  stwu    r1, -0x30(r1)
/* 0C5948 800CAEE8 93E1002C */  stw     r31, 0x2c(r1)
/* 0C594C 800CAEEC 93C10028 */  stw     r30, 0x28(r1)
/* 0C5950 800CAEF0 93A10024 */  stw     r29, 0x24(r1)
/* 0C5954 800CAEF4 3BA30000 */  addi    r29, r3, 0
/* 0C5958 800CAEF8 1C9D0110 */  mulli   r4, r29, 0x110
/* 0C595C 800CAEFC 93810020 */  stw     r28, 0x20(r1)
/* 0C5960 800CAF00 3C608014 */  lis     r3, __CARDBlock@ha
/* 0C5964 800CAF04 380324D0 */  addi    r0, r3, __CARDBlock@l
/* 0C5968 800CAF08 7C602214 */  add     r3, r0, r4
/* 0C596C 800CAF0C 80030024 */  lwz     r0, 0x24(r3)
/* 0C5970 800CAF10 3BE30000 */  addi    r31, r3, 0
/* 0C5974 800CAF14 2C000000 */  cmpwi   r0, 0
/* 0C5978 800CAF18 408202AC */  bne     lbl_800CB1C4
/* 0C597C 800CAF1C 387D0000 */  addi    r3, r29, 0
/* 0C5980 800CAF20 38A10018 */  addi    r5, r1, 0x18
/* 0C5984 800CAF24 38800000 */  li      r4, 0
/* 0C5988 800CAF28 4BFE48DD */  bl      EXIGetID
/* 0C598C 800CAF2C 2C030000 */  cmpwi   r3, 0
/* 0C5990 800CAF30 4082000C */  bne     lbl_800CAF3C
/* 0C5994 800CAF34 3BC0FFFD */  li      r30, -3
/* 0C5998 800CAF38 48000020 */  b       lbl_800CAF58
lbl_800CAF3C:
/* 0C599C 800CAF3C 80610018 */  lwz     r3, 0x18(r1)
/* 0C59A0 800CAF40 4BFFFD55 */  bl      IsCard
/* 0C59A4 800CAF44 2C030000 */  cmpwi   r3, 0
/* 0C59A8 800CAF48 4182000C */  beq     lbl_800CAF54
/* 0C59AC 800CAF4C 3BC00000 */  li      r30, 0
/* 0C59B0 800CAF50 48000008 */  b       lbl_800CAF58
lbl_800CAF54:
/* 0C59B4 800CAF54 3BC0FFFE */  li      r30, -2
lbl_800CAF58:
/* 0C59B8 800CAF58 2C1E0000 */  cmpwi   r30, 0
/* 0C59BC 800CAF5C 41800344 */  blt     lbl_800CB2A0
/* 0C59C0 800CAF60 80010018 */  lwz     r0, 0x18(r1)
/* 0C59C4 800CAF64 3C808010 */  lis     r4, SectorSizeTable@ha
/* 0C59C8 800CAF68 38841C80 */  addi    r4, r4, SectorSizeTable@l
/* 0C59CC 800CAF6C 901F0108 */  stw     r0, 0x108(r31)
/* 0C59D0 800CAF70 3C608010 */  lis     r3, LatencyTable@ha
/* 0C59D4 800CAF74 38031CA0 */  addi    r0, r3, LatencyTable@l
/* 0C59D8 800CAF78 80A10018 */  lwz     r5, 0x18(r1)
/* 0C59DC 800CAF7C 387D0000 */  addi    r3, r29, 0
/* 0C59E0 800CAF80 54A5063A */  rlwinm  r5, r5, 0, 0x18, 0x1d
/* 0C59E4 800CAF84 B0BF0008 */  sth     r5, 8(r31)
/* 0C59E8 800CAF88 80A10018 */  lwz     r5, 0x18(r1)
/* 0C59EC 800CAF8C 54A5BEFA */  rlwinm  r5, r5, 0x17, 0x1b, 0x1d
/* 0C59F0 800CAF90 7C842A14 */  add     r4, r4, r5
/* 0C59F4 800CAF94 80840000 */  lwz     r4, 0(r4)
/* 0C59F8 800CAF98 909F000C */  stw     r4, 0xc(r31)
/* 0C59FC 800CAF9C A0BF0008 */  lhz     r5, 8(r31)
/* 0C5A00 800CAFA0 809F000C */  lwz     r4, 0xc(r31)
/* 0C5A04 800CAFA4 54A5A016 */  slwi    r5, r5, 0x14
/* 0C5A08 800CAFA8 7CA51E70 */  srawi   r5, r5, 3
/* 0C5A0C 800CAFAC 7CA50194 */  addze   r5, r5
/* 0C5A10 800CAFB0 7C8523D6 */  divw    r4, r5, r4
/* 0C5A14 800CAFB4 B09F0010 */  sth     r4, 0x10(r31)
/* 0C5A18 800CAFB8 80810018 */  lwz     r4, 0x18(r1)
/* 0C5A1C 800CAFBC 5484D6FA */  rlwinm  r4, r4, 0x1a, 0x1b, 0x1d
/* 0C5A20 800CAFC0 7C802214 */  add     r4, r0, r4
/* 0C5A24 800CAFC4 80040000 */  lwz     r0, 0(r4)
/* 0C5A28 800CAFC8 901F0014 */  stw     r0, 0x14(r31)
/* 0C5A2C 800CAFCC 4BFFC421 */  bl      __CARDClearStatus
/* 0C5A30 800CAFD0 7C7E1B79 */  or.     r30, r3, r3
/* 0C5A34 800CAFD4 418002CC */  blt     lbl_800CB2A0
/* 0C5A38 800CAFD8 387D0000 */  addi    r3, r29, 0
/* 0C5A3C 800CAFDC 38810014 */  addi    r4, r1, 0x14
/* 0C5A40 800CAFE0 4BFFC31D */  bl      __CARDReadStatus
/* 0C5A44 800CAFE4 7C7E1B79 */  or.     r30, r3, r3
/* 0C5A48 800CAFE8 418002B8 */  blt     lbl_800CB2A0
/* 0C5A4C 800CAFEC 7FA3EB78 */  mr      r3, r29
/* 0C5A50 800CAFF0 4BFE3B49 */  bl      EXIProbe
/* 0C5A54 800CAFF4 2C030000 */  cmpwi   r3, 0
/* 0C5A58 800CAFF8 4082000C */  bne     lbl_800CB004
/* 0C5A5C 800CAFFC 3BC0FFFD */  li      r30, -3
/* 0C5A60 800CB000 480002A0 */  b       lbl_800CB2A0
lbl_800CB004:
/* 0C5A64 800CB004 88010014 */  lbz     r0, 0x14(r1)
/* 0C5A68 800CB008 54000673 */  rlwinm. r0, r0, 0, 0x19, 0x19
/* 0C5A6C 800CB00C 40820114 */  bne     lbl_800CB120
/* 0C5A70 800CB010 387D0000 */  addi    r3, r29, 0
/* 0C5A74 800CB014 389F0018 */  addi    r4, r31, 0x18
/* 0C5A78 800CB018 4BFFD529 */  bl      __CARDUnlock
/* 0C5A7C 800CB01C 7C7E1B79 */  or.     r30, r3, r3
/* 0C5A80 800CB020 41800280 */  blt     lbl_800CB2A0
/* 0C5A84 800CB024 4BFE1339 */  bl      __OSLockSramEx
/* 0C5A88 800CB028 1C1D000C */  mulli   r0, r29, 0xc
/* 0C5A8C 800CB02C 7C830214 */  add     r4, r3, r0
/* 0C5A90 800CB030 881F0018 */  lbz     r0, 0x18(r31)
/* 0C5A94 800CB034 38BF0018 */  addi    r5, r31, 0x18
/* 0C5A98 800CB038 98040000 */  stb     r0, 0(r4)
/* 0C5A9C 800CB03C 39050002 */  addi    r8, r5, 2
/* 0C5AA0 800CB040 39250003 */  addi    r9, r5, 3
/* 0C5AA4 800CB044 88FF0018 */  lbz     r7, 0x18(r31)
/* 0C5AA8 800CB048 39450004 */  addi    r10, r5, 4
/* 0C5AAC 800CB04C 881F0019 */  lbz     r0, 0x19(r31)
/* 0C5AB0 800CB050 39650005 */  addi    r11, r5, 5
/* 0C5AB4 800CB054 39850006 */  addi    r12, r5, 6
/* 0C5AB8 800CB058 98040001 */  stb     r0, 1(r4)
/* 0C5ABC 800CB05C 3B850007 */  addi    r28, r5, 7
/* 0C5AC0 800CB060 38A00008 */  li      r5, 8
/* 0C5AC4 800CB064 881F0019 */  lbz     r0, 0x19(r31)
/* 0C5AC8 800CB068 88C80000 */  lbz     r6, 0(r8)
/* 0C5ACC 800CB06C 7C070214 */  add     r0, r7, r0
/* 0C5AD0 800CB070 98C40002 */  stb     r6, 2(r4)
/* 0C5AD4 800CB074 88E80000 */  lbz     r7, 0(r8)
/* 0C5AD8 800CB078 88C90000 */  lbz     r6, 0(r9)
/* 0C5ADC 800CB07C 7C003A14 */  add     r0, r0, r7
/* 0C5AE0 800CB080 98C40003 */  stb     r6, 3(r4)
/* 0C5AE4 800CB084 88E90000 */  lbz     r7, 0(r9)
/* 0C5AE8 800CB088 88CA0000 */  lbz     r6, 0(r10)
/* 0C5AEC 800CB08C 7C003A14 */  add     r0, r0, r7
/* 0C5AF0 800CB090 98C40004 */  stb     r6, 4(r4)
/* 0C5AF4 800CB094 88EA0000 */  lbz     r7, 0(r10)
/* 0C5AF8 800CB098 88CB0000 */  lbz     r6, 0(r11)
/* 0C5AFC 800CB09C 7C003A14 */  add     r0, r0, r7
/* 0C5B00 800CB0A0 98C40005 */  stb     r6, 5(r4)
/* 0C5B04 800CB0A4 88EB0000 */  lbz     r7, 0(r11)
/* 0C5B08 800CB0A8 88CC0000 */  lbz     r6, 0(r12)
/* 0C5B0C 800CB0AC 7C003A14 */  add     r0, r0, r7
/* 0C5B10 800CB0B0 98C40006 */  stb     r6, 6(r4)
/* 0C5B14 800CB0B4 88EC0000 */  lbz     r7, 0(r12)
/* 0C5B18 800CB0B8 88DC0000 */  lbz     r6, 0(r28)
/* 0C5B1C 800CB0BC 7C003A14 */  add     r0, r0, r7
/* 0C5B20 800CB0C0 98C40007 */  stb     r6, 7(r4)
/* 0C5B24 800CB0C4 88DC0000 */  lbz     r6, 0(r28)
/* 0C5B28 800CB0C8 7C003214 */  add     r0, r0, r6
/* 0C5B2C 800CB0CC 480001F0 */  b       lbl_800CB2BC
lbl_800CB0D0:
/* 0C5B30 800CB0D0 2085000C */  subfic  r4, r5, 0xc
/* 0C5B34 800CB0D4 2C05000C */  cmpwi   r5, 0xc
/* 0C5B38 800CB0D8 7C8903A6 */  mtctr   r4
/* 0C5B3C 800CB0DC 40800028 */  bge     lbl_800CB104
lbl_800CB0E0:
/* 0C5B40 800CB0E0 38E50018 */  addi    r7, r5, 0x18
/* 0C5B44 800CB0E4 7CFF3A14 */  add     r7, r31, r7
/* 0C5B48 800CB0E8 88870000 */  lbz     r4, 0(r7)
/* 0C5B4C 800CB0EC 38A50001 */  addi    r5, r5, 1
/* 0C5B50 800CB0F0 98860000 */  stb     r4, 0(r6)
/* 0C5B54 800CB0F4 38C60001 */  addi    r6, r6, 1
/* 0C5B58 800CB0F8 88870000 */  lbz     r4, 0(r7)
/* 0C5B5C 800CB0FC 7C002214 */  add     r0, r0, r4
/* 0C5B60 800CB100 4200FFE0 */  bdnz    lbl_800CB0E0
lbl_800CB104:
/* 0C5B64 800CB104 7C63EA14 */  add     r3, r3, r29
/* 0C5B68 800CB108 7C0000F8 */  nor     r0, r0, r0
/* 0C5B6C 800CB10C 98030026 */  stb     r0, 0x26(r3)
/* 0C5B70 800CB110 38600001 */  li      r3, 1
/* 0C5B74 800CB114 4BFE1605 */  bl      __OSUnlockSramEx
/* 0C5B78 800CB118 7FC3F378 */  mr      r3, r30
/* 0C5B7C 800CB11C 480001B0 */  b       lbl_800CB2CC
lbl_800CB120:
/* 0C5B80 800CB120 38000001 */  li      r0, 1
/* 0C5B84 800CB124 901F0024 */  stw     r0, 0x24(r31)
/* 0C5B88 800CB128 4BFE1235 */  bl      __OSLockSramEx
/* 0C5B8C 800CB12C 1C1D000C */  mulli   r0, r29, 0xc
/* 0C5B90 800CB130 3BC30000 */  addi    r30, r3, 0
/* 0C5B94 800CB134 7CBE0214 */  add     r5, r30, r0
/* 0C5B98 800CB138 88850000 */  lbz     r4, 0(r5)
/* 0C5B9C 800CB13C 38C00008 */  li      r6, 8
/* 0C5BA0 800CB140 88050001 */  lbz     r0, 1(r5)
/* 0C5BA4 800CB144 88650002 */  lbz     r3, 2(r5)
/* 0C5BA8 800CB148 7F840214 */  add     r28, r4, r0
/* 0C5BAC 800CB14C 88050003 */  lbz     r0, 3(r5)
/* 0C5BB0 800CB150 7F9C1A14 */  add     r28, r28, r3
/* 0C5BB4 800CB154 88650004 */  lbz     r3, 4(r5)
/* 0C5BB8 800CB158 7F9C0214 */  add     r28, r28, r0
/* 0C5BBC 800CB15C 88050005 */  lbz     r0, 5(r5)
/* 0C5BC0 800CB160 7F9C1A14 */  add     r28, r28, r3
/* 0C5BC4 800CB164 88650006 */  lbz     r3, 6(r5)
/* 0C5BC8 800CB168 7F9C0214 */  add     r28, r28, r0
/* 0C5BCC 800CB16C 88050007 */  lbz     r0, 7(r5)
/* 0C5BD0 800CB170 7F9C1A14 */  add     r28, r28, r3
/* 0C5BD4 800CB174 7F9C0214 */  add     r28, r28, r0
/* 0C5BD8 800CB178 4800014C */  b       lbl_800CB2C4
lbl_800CB17C:
/* 0C5BDC 800CB17C 2006000C */  subfic  r0, r6, 0xc
/* 0C5BE0 800CB180 2C06000C */  cmpwi   r6, 0xc
/* 0C5BE4 800CB184 7C0903A6 */  mtctr   r0
/* 0C5BE8 800CB188 40800014 */  bge     lbl_800CB19C
lbl_800CB18C:
/* 0C5BEC 800CB18C 88030000 */  lbz     r0, 0(r3)
/* 0C5BF0 800CB190 38630001 */  addi    r3, r3, 1
/* 0C5BF4 800CB194 7F9C0214 */  add     r28, r28, r0
/* 0C5BF8 800CB198 4200FFF4 */  bdnz    lbl_800CB18C
lbl_800CB19C:
/* 0C5BFC 800CB19C 38600000 */  li      r3, 0
/* 0C5C00 800CB1A0 4BFE1579 */  bl      __OSUnlockSramEx
/* 0C5C04 800CB1A4 7C7EEA14 */  add     r3, r30, r29
/* 0C5C08 800CB1A8 7F80E0F8 */  nor     r0, r28, r28
/* 0C5C0C 800CB1AC 88630026 */  lbz     r3, 0x26(r3)
/* 0C5C10 800CB1B0 5400063E */  clrlwi  r0, r0, 0x18
/* 0C5C14 800CB1B4 7C030040 */  cmplw   r3, r0
/* 0C5C18 800CB1B8 4182000C */  beq     lbl_800CB1C4
/* 0C5C1C 800CB1BC 3BC0FFFB */  li      r30, -5
/* 0C5C20 800CB1C0 480000E0 */  b       lbl_800CB2A0
lbl_800CB1C4:
/* 0C5C24 800CB1C4 801F0024 */  lwz     r0, 0x24(r31)
/* 0C5C28 800CB1C8 2C000001 */  cmpwi   r0, 1
/* 0C5C2C 800CB1CC 40820088 */  bne     lbl_800CB254
/* 0C5C30 800CB1D0 807F0108 */  lwz     r3, 0x108(r31)
/* 0C5C34 800CB1D4 3C038000 */  addis   r0, r3, 0x8000
/* 0C5C38 800CB1D8 28000004 */  cmplwi  r0, 4
/* 0C5C3C 800CB1DC 40820034 */  bne     lbl_800CB210
/* 0C5C40 800CB1E0 4BFE117D */  bl      __OSLockSramEx
/* 0C5C44 800CB1E4 1C1D000C */  mulli   r0, r29, 0xc
/* 0C5C48 800CB1E8 7F83022E */  lhzx    r28, r3, r0
/* 0C5C4C 800CB1EC 38600000 */  li      r3, 0
/* 0C5C50 800CB1F0 4BFE1529 */  bl      __OSUnlockSramEx
/* 0C5C54 800CB1F4 A00D8E38 */  lhz     r0, __CARDVendorID-_SDA_BASE_(r13)
/* 0C5C58 800CB1F8 2800FFFF */  cmplwi  r0, 0xffff
/* 0C5C5C 800CB1FC 4182000C */  beq     lbl_800CB208
/* 0C5C60 800CB200 7C1C0040 */  cmplw   r28, r0
/* 0C5C64 800CB204 4182000C */  beq     lbl_800CB210
lbl_800CB208:
/* 0C5C68 800CB208 3BC0FFFE */  li      r30, -2
/* 0C5C6C 800CB20C 48000094 */  b       lbl_800CB2A0
lbl_800CB210:
/* 0C5C70 800CB210 38000002 */  li      r0, 2
/* 0C5C74 800CB214 901F0024 */  stw     r0, 0x24(r31)
/* 0C5C78 800CB218 387D0000 */  addi    r3, r29, 0
/* 0C5C7C 800CB21C 38800001 */  li      r4, 1
/* 0C5C80 800CB220 4BFFC01D */  bl      __CARDEnableInterrupt
/* 0C5C84 800CB224 7C7E1B79 */  or.     r30, r3, r3
/* 0C5C88 800CB228 41800078 */  blt     lbl_800CB2A0
/* 0C5C8C 800CB22C 3C60800C */  lis     r3, __CARDExiHandler@ha
/* 0C5C90 800CB230 38836FF8 */  addi    r4, r3, __CARDExiHandler@l
/* 0C5C94 800CB234 387D0000 */  addi    r3, r29, 0
/* 0C5C98 800CB238 4BFE3711 */  bl      EXISetExiCallback
/* 0C5C9C 800CB23C 7FA3EB78 */  mr      r3, r29
/* 0C5CA0 800CB240 4BFE44A9 */  bl      EXIUnlock
/* 0C5CA4 800CB244 3C800001 */  lis     r4, 1
/* 0C5CA8 800CB248 807F0080 */  lwz     r3, 0x80(r31)
/* 0C5CAC 800CB24C 3884A000 */  addi    r4, r4, -24576
/* 0C5CB0 800CB250 4BFDDF75 */  bl      DCInvalidateRange
lbl_800CB254:
/* 0C5CB4 800CB254 809F0024 */  lwz     r4, 0x24(r31)
/* 0C5CB8 800CB258 3C60800D */  lis     r3, __CARDMountCallback@ha
/* 0C5CBC 800CB25C 801F000C */  lwz     r0, 0xc(r31)
/* 0C5CC0 800CB260 38E3B2EC */  addi    r7, r3, __CARDMountCallback@l
/* 0C5CC4 800CB264 3864FFFE */  addi    r3, r4, -2
/* 0C5CC8 800CB268 7C8019D6 */  mullw   r4, r0, r3
/* 0C5CCC 800CB26C 80BF0080 */  lwz     r5, 0x80(r31)
/* 0C5CD0 800CB270 54606824 */  slwi    r0, r3, 0xd
/* 0C5CD4 800CB274 7CC50214 */  add     r6, r5, r0
/* 0C5CD8 800CB278 387D0000 */  addi    r3, r29, 0
/* 0C5CDC 800CB27C 38A02000 */  li      r5, 0x2000
/* 0C5CE0 800CB280 4BFFE289 */  bl      __CARDRead
/* 0C5CE4 800CB284 7C7C1B79 */  or.     r28, r3, r3
/* 0C5CE8 800CB288 40800010 */  bge     lbl_800CB298
/* 0C5CEC 800CB28C 387F0000 */  addi    r3, r31, 0
/* 0C5CF0 800CB290 389C0000 */  addi    r4, r28, 0
/* 0C5CF4 800CB294 4BFFCC6D */  bl      __CARDPutControlBlock
lbl_800CB298:
/* 0C5CF8 800CB298 7F83E378 */  mr      r3, r28
/* 0C5CFC 800CB29C 48000030 */  b       lbl_800CB2CC
lbl_800CB2A0:
/* 0C5D00 800CB2A0 7FA3EB78 */  mr      r3, r29
/* 0C5D04 800CB2A4 4BFE4445 */  bl      EXIUnlock
/* 0C5D08 800CB2A8 387D0000 */  addi    r3, r29, 0
/* 0C5D0C 800CB2AC 389E0000 */  addi    r4, r30, 0
/* 0C5D10 800CB2B0 4800035D */  bl      DoUnmount
/* 0C5D14 800CB2B4 7FC3F378 */  mr      r3, r30
/* 0C5D18 800CB2B8 48000014 */  b       lbl_800CB2CC
lbl_800CB2BC:
/* 0C5D1C 800CB2BC 38C40008 */  addi    r6, r4, 8
/* 0C5D20 800CB2C0 4BFFFE10 */  b       lbl_800CB0D0
lbl_800CB2C4:
/* 0C5D24 800CB2C4 38650008 */  addi    r3, r5, 8
/* 0C5D28 800CB2C8 4BFFFEB4 */  b       lbl_800CB17C
lbl_800CB2CC:
/* 0C5D2C 800CB2CC 80010034 */  lwz     r0, 0x34(r1)
/* 0C5D30 800CB2D0 83E1002C */  lwz     r31, 0x2c(r1)
/* 0C5D34 800CB2D4 83C10028 */  lwz     r30, 0x28(r1)
/* 0C5D38 800CB2D8 83A10024 */  lwz     r29, 0x24(r1)
/* 0C5D3C 800CB2DC 83810020 */  lwz     r28, 0x20(r1)
/* 0C5D40 800CB2E0 38210030 */  addi    r1, r1, 0x30
/* 0C5D44 800CB2E4 7C0803A6 */  mtlr    r0
/* 0C5D48 800CB2E8 4E800020 */  blr     

glabel __CARDMountCallback
/* 0C5D4C 800CB2EC 7C0802A6 */  mflr    r0
/* 0C5D50 800CB2F0 90010004 */  stw     r0, 4(r1)
/* 0C5D54 800CB2F4 9421FFE0 */  stwu    r1, -0x20(r1)
/* 0C5D58 800CB2F8 93E1001C */  stw     r31, 0x1c(r1)
/* 0C5D5C 800CB2FC 93C10018 */  stw     r30, 0x18(r1)
/* 0C5D60 800CB300 93A10014 */  stw     r29, 0x14(r1)
/* 0C5D64 800CB304 3BA40000 */  addi    r29, r4, 0
/* 0C5D68 800CB308 2C1DFFFD */  cmpwi   r29, -3
/* 0C5D6C 800CB30C 93810010 */  stw     r28, 0x10(r1)
/* 0C5D70 800CB310 3B830000 */  addi    r28, r3, 0
/* 0C5D74 800CB314 1CBC0110 */  mulli   r5, r28, 0x110
/* 0C5D78 800CB318 3C608014 */  lis     r3, __CARDBlock@ha
/* 0C5D7C 800CB31C 380324D0 */  addi    r0, r3, __CARDBlock@l
/* 0C5D80 800CB320 7FE02A14 */  add     r31, r0, r5
/* 0C5D84 800CB324 418200A8 */  beq     lbl_800CB3CC
/* 0C5D88 800CB328 40800010 */  bge     lbl_800CB338
/* 0C5D8C 800CB32C 2C1DFFFB */  cmpwi   r29, -5
/* 0C5D90 800CB330 4182009C */  beq     lbl_800CB3CC
/* 0C5D94 800CB334 480000A4 */  b       lbl_800CB3D8
lbl_800CB338:
/* 0C5D98 800CB338 2C1D0001 */  cmpwi   r29, 1
/* 0C5D9C 800CB33C 4182004C */  beq     lbl_800CB388
/* 0C5DA0 800CB340 40800098 */  bge     lbl_800CB3D8
/* 0C5DA4 800CB344 2C1D0000 */  cmpwi   r29, 0
/* 0C5DA8 800CB348 40800008 */  bge     lbl_800CB350
/* 0C5DAC 800CB34C 4800008C */  b       lbl_800CB3D8
lbl_800CB350:
/* 0C5DB0 800CB350 807F0024 */  lwz     r3, 0x24(r31)
/* 0C5DB4 800CB354 38030001 */  addi    r0, r3, 1
/* 0C5DB8 800CB358 2C000007 */  cmpwi   r0, 7
/* 0C5DBC 800CB35C 901F0024 */  stw     r0, 0x24(r31)
/* 0C5DC0 800CB360 40800018 */  bge     lbl_800CB378
/* 0C5DC4 800CB364 7F83E378 */  mr      r3, r28
/* 0C5DC8 800CB368 4BFFFB75 */  bl      DoMount
/* 0C5DCC 800CB36C 7C7D1B79 */  or.     r29, r3, r3
/* 0C5DD0 800CB370 41800068 */  blt     lbl_800CB3D8
/* 0C5DD4 800CB374 48000090 */  b       lbl_800CB404
lbl_800CB378:
/* 0C5DD8 800CB378 7FE3FB78 */  mr      r3, r31
/* 0C5DDC 800CB37C 4BFFF2A9 */  bl      __CARDVerify
/* 0C5DE0 800CB380 7C7D1B78 */  mr      r29, r3
/* 0C5DE4 800CB384 48000054 */  b       lbl_800CB3D8
lbl_800CB388:
/* 0C5DE8 800CB388 3C60800D */  lis     r3, __CARDMountCallback@ha
/* 0C5DEC 800CB38C 3803B2EC */  addi    r0, r3, __CARDMountCallback@l
/* 0C5DF0 800CB390 3C60800C */  lis     r3, __CARDUnlockedHandler@ha
/* 0C5DF4 800CB394 901F00DC */  stw     r0, 0xdc(r31)
/* 0C5DF8 800CB398 38A371B8 */  addi    r5, r3, __CARDUnlockedHandler@l
/* 0C5DFC 800CB39C 387C0000 */  addi    r3, r28, 0
/* 0C5E00 800CB3A0 38800000 */  li      r4, 0
/* 0C5E04 800CB3A4 4BFE4251 */  bl      EXILock
/* 0C5E08 800CB3A8 2C030000 */  cmpwi   r3, 0
/* 0C5E0C 800CB3AC 41820058 */  beq     lbl_800CB404
/* 0C5E10 800CB3B0 38000000 */  li      r0, 0
/* 0C5E14 800CB3B4 901F00DC */  stw     r0, 0xdc(r31)
/* 0C5E18 800CB3B8 7F83E378 */  mr      r3, r28
/* 0C5E1C 800CB3BC 4BFFFB21 */  bl      DoMount
/* 0C5E20 800CB3C0 7C7D1B79 */  or.     r29, r3, r3
/* 0C5E24 800CB3C4 41800014 */  blt     lbl_800CB3D8
/* 0C5E28 800CB3C8 4800003C */  b       lbl_800CB404
lbl_800CB3CC:
/* 0C5E2C 800CB3CC 387C0000 */  addi    r3, r28, 0
/* 0C5E30 800CB3D0 389D0000 */  addi    r4, r29, 0
/* 0C5E34 800CB3D4 48000239 */  bl      DoUnmount
lbl_800CB3D8:
/* 0C5E38 800CB3D8 83DF00D0 */  lwz     r30, 0xd0(r31)
/* 0C5E3C 800CB3DC 38000000 */  li      r0, 0
/* 0C5E40 800CB3E0 387F0000 */  addi    r3, r31, 0
/* 0C5E44 800CB3E4 901F00D0 */  stw     r0, 0xd0(r31)
/* 0C5E48 800CB3E8 7FA4EB78 */  mr      r4, r29
/* 0C5E4C 800CB3EC 4BFFCB15 */  bl      __CARDPutControlBlock
/* 0C5E50 800CB3F0 399E0000 */  addi    r12, r30, 0
/* 0C5E54 800CB3F4 7D8803A6 */  mtlr    r12
/* 0C5E58 800CB3F8 387C0000 */  addi    r3, r28, 0
/* 0C5E5C 800CB3FC 389D0000 */  addi    r4, r29, 0
/* 0C5E60 800CB400 4E800021 */  blrl    
lbl_800CB404:
/* 0C5E64 800CB404 80010024 */  lwz     r0, 0x24(r1)
/* 0C5E68 800CB408 83E1001C */  lwz     r31, 0x1c(r1)
/* 0C5E6C 800CB40C 83C10018 */  lwz     r30, 0x18(r1)
/* 0C5E70 800CB410 83A10014 */  lwz     r29, 0x14(r1)
/* 0C5E74 800CB414 83810010 */  lwz     r28, 0x10(r1)
/* 0C5E78 800CB418 38210020 */  addi    r1, r1, 0x20
/* 0C5E7C 800CB41C 7C0803A6 */  mtlr    r0
/* 0C5E80 800CB420 4E800020 */  blr     

glabel CARDMountAsync
/* 0C5E84 800CB424 7C0802A6 */  mflr    r0
/* 0C5E88 800CB428 90010004 */  stw     r0, 4(r1)
/* 0C5E8C 800CB42C 9421FFD0 */  stwu    r1, -0x30(r1)
/* 0C5E90 800CB430 BF410018 */  stmw    r26, 0x18(r1)
/* 0C5E94 800CB434 7C7E1B79 */  or.     r30, r3, r3
/* 0C5E98 800CB438 3B440000 */  addi    r26, r4, 0
/* 0C5E9C 800CB43C 3B650000 */  addi    r27, r5, 0
/* 0C5EA0 800CB440 3BA60000 */  addi    r29, r6, 0
/* 0C5EA4 800CB444 4180000C */  blt     lbl_800CB450
/* 0C5EA8 800CB448 2C1E0002 */  cmpwi   r30, 2
/* 0C5EAC 800CB44C 4180000C */  blt     lbl_800CB458
lbl_800CB450:
/* 0C5EB0 800CB450 3860FF80 */  li      r3, -128
/* 0C5EB4 800CB454 4800015C */  b       lbl_800CB5B0
lbl_800CB458:
/* 0C5EB8 800CB458 3C608000 */  lis     r3, 0x8000
/* 0C5EBC 800CB45C 880330E3 */  lbz     r0, 0x30e3(r3)
/* 0C5EC0 800CB460 54000631 */  rlwinm. r0, r0, 0, 0x18, 0x18
/* 0C5EC4 800CB464 4182000C */  beq     lbl_800CB470
/* 0C5EC8 800CB468 3860FFFD */  li      r3, -3
/* 0C5ECC 800CB46C 48000144 */  b       lbl_800CB5B0
lbl_800CB470:
/* 0C5ED0 800CB470 1C9E0110 */  mulli   r4, r30, 0x110
/* 0C5ED4 800CB474 3C608014 */  lis     r3, __CARDBlock@ha
/* 0C5ED8 800CB478 380324D0 */  addi    r0, r3, __CARDBlock@l
/* 0C5EDC 800CB47C 7FE02214 */  add     r31, r0, r4
/* 0C5EE0 800CB480 4BFDF2F1 */  bl      OSDisableInterrupts
/* 0C5EE4 800CB484 801F0004 */  lwz     r0, 4(r31)
/* 0C5EE8 800CB488 3B830000 */  addi    r28, r3, 0
/* 0C5EEC 800CB48C 2C00FFFF */  cmpwi   r0, -1
/* 0C5EF0 800CB490 40820014 */  bne     lbl_800CB4A4
/* 0C5EF4 800CB494 7F83E378 */  mr      r3, r28
/* 0C5EF8 800CB498 4BFDF301 */  bl      OSRestoreInterrupts
/* 0C5EFC 800CB49C 3860FFFF */  li      r3, -1
/* 0C5F00 800CB4A0 48000110 */  b       lbl_800CB5B0
lbl_800CB4A4:
/* 0C5F04 800CB4A4 801F0000 */  lwz     r0, 0(r31)
/* 0C5F08 800CB4A8 2C000000 */  cmpwi   r0, 0
/* 0C5F0C 800CB4AC 40820024 */  bne     lbl_800CB4D0
/* 0C5F10 800CB4B0 7FC3F378 */  mr      r3, r30
/* 0C5F14 800CB4B4 4BFE4311 */  bl      EXIGetState
/* 0C5F18 800CB4B8 54600739 */  rlwinm. r0, r3, 0, 0x1c, 0x1c
/* 0C5F1C 800CB4BC 41820014 */  beq     lbl_800CB4D0
/* 0C5F20 800CB4C0 7F83E378 */  mr      r3, r28
/* 0C5F24 800CB4C4 4BFDF2D5 */  bl      OSRestoreInterrupts
/* 0C5F28 800CB4C8 3860FFFE */  li      r3, -2
/* 0C5F2C 800CB4CC 480000E4 */  b       lbl_800CB5B0
lbl_800CB4D0:
/* 0C5F30 800CB4D0 3800FFFF */  li      r0, -1
/* 0C5F34 800CB4D4 901F0004 */  stw     r0, 4(r31)
/* 0C5F38 800CB4D8 281D0000 */  cmplwi  r29, 0
/* 0C5F3C 800CB4DC 935F0080 */  stw     r26, 0x80(r31)
/* 0C5F40 800CB4E0 937F00C4 */  stw     r27, 0xc4(r31)
/* 0C5F44 800CB4E4 4182000C */  beq     lbl_800CB4F0
/* 0C5F48 800CB4E8 7FA0EB78 */  mr      r0, r29
/* 0C5F4C 800CB4EC 4800000C */  b       lbl_800CB4F8
lbl_800CB4F0:
/* 0C5F50 800CB4F0 3C60800C */  lis     r3, __CARDDefaultApiCallback@ha
/* 0C5F54 800CB4F4 38036EE8 */  addi    r0, r3, __CARDDefaultApiCallback@l
lbl_800CB4F8:
/* 0C5F58 800CB4F8 901F00D0 */  stw     r0, 0xd0(r31)
/* 0C5F5C 800CB4FC 38000000 */  li      r0, 0
/* 0C5F60 800CB500 901F00CC */  stw     r0, 0xcc(r31)
/* 0C5F64 800CB504 801F0000 */  lwz     r0, 0(r31)
/* 0C5F68 800CB508 2C000000 */  cmpwi   r0, 0
/* 0C5F6C 800CB50C 40820034 */  bne     lbl_800CB540
/* 0C5F70 800CB510 3C60800C */  lis     r3, __CARDExtHandler@ha
/* 0C5F74 800CB514 38836F20 */  addi    r4, r3, __CARDExtHandler@l
/* 0C5F78 800CB518 387E0000 */  addi    r3, r30, 0
/* 0C5F7C 800CB51C 4BFE3751 */  bl      EXIAttach
/* 0C5F80 800CB520 2C030000 */  cmpwi   r3, 0
/* 0C5F84 800CB524 4082001C */  bne     lbl_800CB540
/* 0C5F88 800CB528 3800FFFD */  li      r0, -3
/* 0C5F8C 800CB52C 901F0004 */  stw     r0, 4(r31)
/* 0C5F90 800CB530 7F83E378 */  mr      r3, r28
/* 0C5F94 800CB534 4BFDF265 */  bl      OSRestoreInterrupts
/* 0C5F98 800CB538 3860FFFD */  li      r3, -3
/* 0C5F9C 800CB53C 48000074 */  b       lbl_800CB5B0
lbl_800CB540:
/* 0C5FA0 800CB540 3BA00000 */  li      r29, 0
/* 0C5FA4 800CB544 93BF0024 */  stw     r29, 0x24(r31)
/* 0C5FA8 800CB548 38000001 */  li      r0, 1
/* 0C5FAC 800CB54C 387E0000 */  addi    r3, r30, 0
/* 0C5FB0 800CB550 901F0000 */  stw     r0, 0(r31)
/* 0C5FB4 800CB554 38800000 */  li      r4, 0
/* 0C5FB8 800CB558 4BFE33F1 */  bl      EXISetExiCallback
/* 0C5FBC 800CB55C 387F00E0 */  addi    r3, r31, 0xe0
/* 0C5FC0 800CB560 4BFDCEF1 */  bl      OSCancelAlarm
/* 0C5FC4 800CB564 93BF0084 */  stw     r29, 0x84(r31)
/* 0C5FC8 800CB568 7F83E378 */  mr      r3, r28
/* 0C5FCC 800CB56C 93BF0088 */  stw     r29, 0x88(r31)
/* 0C5FD0 800CB570 4BFDF229 */  bl      OSRestoreInterrupts
/* 0C5FD4 800CB574 3C60800D */  lis     r3, __CARDMountCallback@ha
/* 0C5FD8 800CB578 3803B2EC */  addi    r0, r3, __CARDMountCallback@l
/* 0C5FDC 800CB57C 3C60800C */  lis     r3, __CARDUnlockedHandler@ha
/* 0C5FE0 800CB580 901F00DC */  stw     r0, 0xdc(r31)
/* 0C5FE4 800CB584 38A371B8 */  addi    r5, r3, __CARDUnlockedHandler@l
/* 0C5FE8 800CB588 387E0000 */  addi    r3, r30, 0
/* 0C5FEC 800CB58C 38800000 */  li      r4, 0
/* 0C5FF0 800CB590 4BFE4065 */  bl      EXILock
/* 0C5FF4 800CB594 2C030000 */  cmpwi   r3, 0
/* 0C5FF8 800CB598 4082000C */  bne     lbl_800CB5A4
/* 0C5FFC 800CB59C 38600000 */  li      r3, 0
/* 0C6000 800CB5A0 48000010 */  b       lbl_800CB5B0
lbl_800CB5A4:
/* 0C6004 800CB5A4 93BF00DC */  stw     r29, 0xdc(r31)
/* 0C6008 800CB5A8 7FC3F378 */  mr      r3, r30
/* 0C600C 800CB5AC 4BFFF931 */  bl      DoMount
lbl_800CB5B0:
/* 0C6010 800CB5B0 BB410018 */  lmw     r26, 0x18(r1)
/* 0C6014 800CB5B4 80010034 */  lwz     r0, 0x34(r1)
/* 0C6018 800CB5B8 38210030 */  addi    r1, r1, 0x30
/* 0C601C 800CB5BC 7C0803A6 */  mtlr    r0
/* 0C6020 800CB5C0 4E800020 */  blr     

glabel CARDMount
/* 0C6024 800CB5C4 7C0802A6 */  mflr    r0
/* 0C6028 800CB5C8 3CC0800C */  lis     r6, __CARDSyncCallback@ha
/* 0C602C 800CB5CC 90010004 */  stw     r0, 4(r1)
/* 0C6030 800CB5D0 38C66EEC */  addi    r6, r6, __CARDSyncCallback@l
/* 0C6034 800CB5D4 9421FFE0 */  stwu    r1, -0x20(r1)
/* 0C6038 800CB5D8 93E1001C */  stw     r31, 0x1c(r1)
/* 0C603C 800CB5DC 3BE30000 */  addi    r31, r3, 0
/* 0C6040 800CB5E0 4BFFFE45 */  bl      CARDMountAsync
/* 0C6044 800CB5E4 2C030000 */  cmpwi   r3, 0
/* 0C6048 800CB5E8 40800008 */  bge     lbl_800CB5F0
/* 0C604C 800CB5EC 4800000C */  b       lbl_800CB5F8
lbl_800CB5F0:
/* 0C6050 800CB5F0 7FE3FB78 */  mr      r3, r31
/* 0C6054 800CB5F4 4BFFCAF1 */  bl      __CARDSync
lbl_800CB5F8:
/* 0C6058 800CB5F8 80010024 */  lwz     r0, 0x24(r1)
/* 0C605C 800CB5FC 83E1001C */  lwz     r31, 0x1c(r1)
/* 0C6060 800CB600 38210020 */  addi    r1, r1, 0x20
/* 0C6064 800CB604 7C0803A6 */  mtlr    r0
/* 0C6068 800CB608 4E800020 */  blr     

DoUnmount:
/* 0C606C 800CB60C 7C0802A6 */  mflr    r0
/* 0C6070 800CB610 90010004 */  stw     r0, 4(r1)
/* 0C6074 800CB614 9421FFE0 */  stwu    r1, -0x20(r1)
/* 0C6078 800CB618 93E1001C */  stw     r31, 0x1c(r1)
/* 0C607C 800CB61C 93C10018 */  stw     r30, 0x18(r1)
/* 0C6080 800CB620 93A10014 */  stw     r29, 0x14(r1)
/* 0C6084 800CB624 3BA40000 */  addi    r29, r4, 0
/* 0C6088 800CB628 93810010 */  stw     r28, 0x10(r1)
/* 0C608C 800CB62C 3B830000 */  addi    r28, r3, 0
/* 0C6090 800CB630 1CBC0110 */  mulli   r5, r28, 0x110
/* 0C6094 800CB634 3C608014 */  lis     r3, __CARDBlock@ha
/* 0C6098 800CB638 380324D0 */  addi    r0, r3, __CARDBlock@l
/* 0C609C 800CB63C 7FE02A14 */  add     r31, r0, r5
/* 0C60A0 800CB640 4BFDF131 */  bl      OSDisableInterrupts
/* 0C60A4 800CB644 801F0000 */  lwz     r0, 0(r31)
/* 0C60A8 800CB648 3BC30000 */  addi    r30, r3, 0
/* 0C60AC 800CB64C 2C000000 */  cmpwi   r0, 0
/* 0C60B0 800CB650 41820030 */  beq     lbl_800CB680
/* 0C60B4 800CB654 387C0000 */  addi    r3, r28, 0
/* 0C60B8 800CB658 38800000 */  li      r4, 0
/* 0C60BC 800CB65C 4BFE32ED */  bl      EXISetExiCallback
/* 0C60C0 800CB660 7F83E378 */  mr      r3, r28
/* 0C60C4 800CB664 4BFE3715 */  bl      EXIDetach
/* 0C60C8 800CB668 387F00E0 */  addi    r3, r31, 0xe0
/* 0C60CC 800CB66C 4BFDCDE5 */  bl      OSCancelAlarm
/* 0C60D0 800CB670 38000000 */  li      r0, 0
/* 0C60D4 800CB674 901F0000 */  stw     r0, 0(r31)
/* 0C60D8 800CB678 93BF0004 */  stw     r29, 4(r31)
/* 0C60DC 800CB67C 901F0024 */  stw     r0, 0x24(r31)
lbl_800CB680:
/* 0C60E0 800CB680 7FC3F378 */  mr      r3, r30
/* 0C60E4 800CB684 4BFDF115 */  bl      OSRestoreInterrupts
/* 0C60E8 800CB688 80010024 */  lwz     r0, 0x24(r1)
/* 0C60EC 800CB68C 83E1001C */  lwz     r31, 0x1c(r1)
/* 0C60F0 800CB690 83C10018 */  lwz     r30, 0x18(r1)
/* 0C60F4 800CB694 83A10014 */  lwz     r29, 0x14(r1)
/* 0C60F8 800CB698 83810010 */  lwz     r28, 0x10(r1)
/* 0C60FC 800CB69C 38210020 */  addi    r1, r1, 0x20
/* 0C6100 800CB6A0 7C0803A6 */  mtlr    r0
/* 0C6104 800CB6A4 4E800020 */  blr     

glabel CARDUnmount
/* 0C6108 800CB6A8 7C0802A6 */  mflr    r0
/* 0C610C 800CB6AC 90010004 */  stw     r0, 4(r1)
/* 0C6110 800CB6B0 9421FFE0 */  stwu    r1, -0x20(r1)
/* 0C6114 800CB6B4 93E1001C */  stw     r31, 0x1c(r1)
/* 0C6118 800CB6B8 3881000C */  addi    r4, r1, 0xc
/* 0C611C 800CB6BC 93C10018 */  stw     r30, 0x18(r1)
/* 0C6120 800CB6C0 93A10014 */  stw     r29, 0x14(r1)
/* 0C6124 800CB6C4 3BA30000 */  addi    r29, r3, 0
/* 0C6128 800CB6C8 4BFFC781 */  bl      __CARDGetControlBlock
/* 0C612C 800CB6CC 2C030000 */  cmpwi   r3, 0
/* 0C6130 800CB6D0 40800008 */  bge     lbl_800CB6D8
/* 0C6134 800CB6D4 48000064 */  b       lbl_800CB738
lbl_800CB6D8:
/* 0C6138 800CB6D8 1C9D0110 */  mulli   r4, r29, 0x110
/* 0C613C 800CB6DC 3C608014 */  lis     r3, __CARDBlock@ha
/* 0C6140 800CB6E0 380324D0 */  addi    r0, r3, __CARDBlock@l
/* 0C6144 800CB6E4 7FC02214 */  add     r30, r0, r4
/* 0C6148 800CB6E8 4BFDF089 */  bl      OSDisableInterrupts
/* 0C614C 800CB6EC 801E0000 */  lwz     r0, 0(r30)
/* 0C6150 800CB6F0 3BE30000 */  addi    r31, r3, 0
/* 0C6154 800CB6F4 2C000000 */  cmpwi   r0, 0
/* 0C6158 800CB6F8 41820034 */  beq     lbl_800CB72C
/* 0C615C 800CB6FC 387D0000 */  addi    r3, r29, 0
/* 0C6160 800CB700 38800000 */  li      r4, 0
/* 0C6164 800CB704 4BFE3245 */  bl      EXISetExiCallback
/* 0C6168 800CB708 7FA3EB78 */  mr      r3, r29
/* 0C616C 800CB70C 4BFE366D */  bl      EXIDetach
/* 0C6170 800CB710 387E00E0 */  addi    r3, r30, 0xe0
/* 0C6174 800CB714 4BFDCD3D */  bl      OSCancelAlarm
/* 0C6178 800CB718 38600000 */  li      r3, 0
/* 0C617C 800CB71C 907E0000 */  stw     r3, 0(r30)
/* 0C6180 800CB720 3800FFFD */  li      r0, -3
/* 0C6184 800CB724 901E0004 */  stw     r0, 4(r30)
/* 0C6188 800CB728 907E0024 */  stw     r3, 0x24(r30)
lbl_800CB72C:
/* 0C618C 800CB72C 7FE3FB78 */  mr      r3, r31
/* 0C6190 800CB730 4BFDF069 */  bl      OSRestoreInterrupts
/* 0C6194 800CB734 38600000 */  li      r3, 0
lbl_800CB738:
/* 0C6198 800CB738 80010024 */  lwz     r0, 0x24(r1)
/* 0C619C 800CB73C 83E1001C */  lwz     r31, 0x1c(r1)
/* 0C61A0 800CB740 83C10018 */  lwz     r30, 0x18(r1)
/* 0C61A4 800CB744 83A10014 */  lwz     r29, 0x14(r1)
/* 0C61A8 800CB748 38210020 */  addi    r1, r1, 0x20
/* 0C61AC 800CB74C 7C0803A6 */  mtlr    r0
/* 0C61B0 800CB750 4E800020 */  blr     


.section .data, "wa"

.balign 8

/* 000FED00 80101C80 0020 */
SectorSizeTable:
    .long 0x00002000, 0x00004000, 0x00008000, 0x00010000, 0x00020000, 0x00040000, 0x00000000, 0x00000000

.balign 4

/* 000FED20 80101CA0 0020 */
LatencyTable:
    .long 0x00000004, 0x00000008, 0x00000010, 0x00000020, 0x00000040, 0x00000080, 0x00000100, 0x00000200


